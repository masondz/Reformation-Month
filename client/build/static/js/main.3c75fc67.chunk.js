(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(17),s=a.n(r),c=(a(30),a(2)),o=a.n(c),l=a(3),i=a(5),d=a(4),u=(a(32),a(14)),b=a(8),h=a(6),j=(a(33),a(34),a(0)),m=function(e){e.setAuth;var t=e.setInReadingChallenge,a=(e.setReadersChallenges,e.readersChallenges,e.checkChallenge),r=e.toggleFC,s=Object(n.useState)([]),c=Object(d.a)(s,2),u=c[0],b=c[1],m=Object(n.useState)({challenge_name:"",id:"",organization:""}),p=Object(d.a)(m,2),g=p[0],f=p[1],O=g.challenge_name,x=g.id;g.organization;function v(){return(v=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/find-challenges",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,b(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){v.apply(this,arguments)}()}),[]);var y=Object(n.useState)("Blank id"),k=Object(d.a)(y,2),_=k[0],C=k[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,C(a.id),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[_]),Object(n.useEffect)((function(){!function(){for(var e=0;e<u.length;e++)u[e].challenge_name===g.challenge_name&&f({challenge_name:u[e].challenge_name,organization:u[e].organization,id:u[e].id})}()}),[O,u]);var N=function(){var e=Object(i.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={reader_id:_,challenge_id:x},e.next=7,fetch("/find-challenges",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)}).then((function(e){e.json().then((function(e){return console.log(e)})),200===e.status?(h.a.success("You have joined the ".concat(O," challenge!")),t(!0),a()):401===e.status?h.a.error("You have already joined challenge: ".concat(O)):400===e.status&&h.a.error("".concat(O," does not exists"))})).then(f({challenge_name:"",id:"",organization:""}));case 7:e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),w=Object(n.useState)(""),S=Object(d.a)(w,2);S[0],S[1];return Object(j.jsx)(n.Fragment,{children:Object(j.jsxs)("form",{className:"",onSubmit:N,children:[Object(j.jsx)("p",{onClick:function(){return r()},className:"FC-close",children:"+"}),Object(j.jsxs)("div",{className:"row align-items-end",children:[Object(j.jsx)("label",{htmlFor:"chal-list",children:"Find a reading Challenge"}),Object(j.jsx)("input",{value:O,onChange:function(e){return function(e){f(Object(l.a)(Object(l.a)({},g),{},{challenge_name:e.target.value}))}(e)},className:"form-control",list:"challenge-list",name:"chal-list",id:"chal-list",placeholder:"Search for reading challenge"}),Object(j.jsx)("datalist",{id:"challenge-list",children:u.map((function(e){return Object(j.jsxs)("option",{value:e.challenge_name,children:[e.challenge,": ",e.goal]},e.id)}))}),Object(j.jsx)("button",{className:"btn btn-outline-success my-2",children:"Join"})]})]})})},p=function(e){e.setAuth;var t=e.challenge,a=e.setCalculating,r=e.reader,s=e.displayTotal,c=Object(n.useState)("..."),l=Object(d.a)(c,2),u=l[0],b=l[1];console.log("ChallengeTotal challenge prop:"+t.challenge),console.log("displayTotal challenge prop:"+s);var h=Object(n.useState)(0),m=Object(d.a)(h,2),p=m[0],g=m[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){var n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.challenge,e.prev=2,e.next=5,fetch("/challenge-dashboard/challenge-total/".concat(n,"/").concat(r),{method:"GET",headers:{"Content-Type":"application/json",token:localStorage.token}});case 5:return s=e.sent,e.next=8,s.json();case 8:c=e.sent,console.log("getTotal query"+c),b(c.total),a(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}})()(),g(u/t.goal*100)}),[u,t.goal,t.id,r.chapters_read,r.books_read,r.verses_memorized,s.chapters_read,s.books_read,s.verses_memorized]),console.log(p),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("h3",{children:[u," / ",t.goal," ",t.challenge]}),Object(j.jsx)("div",{className:"progress",children:Object(j.jsx)("div",{className:"progress-bar bg-warning",style:{width:"".concat(p,"%")}})})]})})},g=a(7),f=function(e){var t=e.challenge,a=e.reader,r=(e.setReadersChallenges,e.readersChallenges);console.log(r);var s=Object(n.useState)({challenge_name:t.challenge_name,organization:t.organization,goal:t.goal,challenge_type:t.challenge,id:t.id}),c=Object(d.a)(s,2),u=c[0],b=c[1];console.log(u.challenge_type);var m={challenge_name:t.challenge_name,organization:t.organization,goal:t.goal,challenge_type:t.challenge,id:t.id},p=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.confirm("Are you sure you want to delete challenge?"),e.prev=1,!0!==n){e.next=19;break}return console.log("going to delete the challenge"),s=a.id,c=u.challenge_name,console.log(c,s),l={reader_id:s,challenge_name:c},console.log(r),e.next=11,fetch("/challenge-dashboard/",{method:"DELETE",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(l)});case 11:return i=e.sent,e.next=14,i.json();case 14:d=e.sent,console.log(d),202===i.status?window.location="/":401===i.status?h.a.error("Challenge already doesn't exist."):403===i.status&&h.a.error("You are not authorized to delete this challenge."),e.next=20;break;case 19:h.a.warning("Challenge not deleted.");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),console.error(e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e){e.preventDefault(),b(Object(l.a)(Object(l.a)({},u),{},Object(g.a)({},e.target.name,e.target.value)))},O=function(e){console.log("radio clicked"),e.preventDefault(),b(Object(l.a)(Object(l.a)({},u),{},Object(g.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n=a.id,r=u.challenge_name,s=u.organization,c=u.challenge_type,l=u.goal,i=u.id,d={reader_id:n,challenge_name:r,organization:s,challenge_type:c,goal:l,id:i},console.log(d),e.next=8,fetch("/challenge-dashboard/",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(d)});case 8:if(403!==e.sent.status){e.next=11;break}return e.abrupt("return",h.a.error("You are not authorized to change this challenge"));case 11:window.location="/",h.a.success("Reading Challenge updated!"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0.messages);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),v="id".concat(u.id),y="#id".concat(u.id);return Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)("button",{type:"button",class:"challenge-edit","data-toggle":"modal","data-target":y,children:"Edit"}),Object(j.jsx)("div",{className:"modal fade",id:v,tabindex:"-1","aria-labelledby":"edit-challenge","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",children:[Object(j.jsxs)("h3",{class:"modal-title",id:v,children:["Edit Challenge ",u.challenge_name]}),Object(j.jsx)("button",{type:"button",className:"btn-close close","data-bs-dismiss":"modal","aria-label":"Close","data-dismiss":"modal",onClick:function(){return b(m)}})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsxs)("form",{className:"form-control",children:[Object(j.jsxs)("div",{className:"form-control bg-light text-black",children:[Object(j.jsx)("lable",{htmlFor:"goal",className:"mr-2",children:"Goal:"}),Object(j.jsx)("input",{className:"form-control mt-1",type:"number",name:"goal",onChange:function(e){return f(e)},value:u.goal})]}),Object(j.jsx)("br",{}),Object(j.jsxs)("lable",{htmlFor:"organization",className:"bg-light text-black form-control",children:["Organization:",Object(j.jsx)("input",{className:" form-control mt-1",type:"text",name:"organization",value:u.organization,onChange:function(e){return f(e)}})]}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{className:"form-control bg-light",children:["Challenge Type:",Object(j.jsx)("br",{}),Object(j.jsx)("h4",{className:"OptionSign border border-secondary",children:u.challenge_type}),Object(j.jsxs)("div",{class:"btn-group ChallengeType bg-white",children:[Object(j.jsx)("button",{type:"button",className:"btn btn-outline-secondary",name:"challenge_type",onClick:function(e){return O(e)},value:"chapters",children:"Chapters"}),Object(j.jsx)("button",{disabled:!0,type:"button",className:"btn btn-outline-secondary",value:"books",name:"challenge_type",onClick:function(e){return O(e)},children:"Books"}),Object(j.jsx)("button",{disabled:!0,type:"button",className:"btn btn-outline-secondary",value:"verses",name:"challenge_type",onClick:function(e){return O(e)},children:"Verses"})]})]}),Object(j.jsx)("br",{})]})}),Object(j.jsxs)("div",{class:"modal-footer",children:[Object(j.jsx)("button",{type:"button",class:"btn btn-primary",onClick:function(e){return x(e)},children:"Save changes"}),Object(j.jsx)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal","data-dismiss":"modal",onClick:function(){p()},children:"Delete"})]})]})})})]})},O=function(e){var t=e.setAuth,a=e.reader,r=e.readersChallenges,s=e.setReadersChallenges,c=e.setInReadingChallenge,l=e.displayTotal;console.log("ReadeChallenges.js:displayTotal -"+l);a.first_name,a.last_name,a.chapters_read,a.books_read,a.versus_memorized,a.id;var u=Object(n.useState)(!1),b=Object(d.a)(u,2),m=b[0],g=b[1],O=Object(n.useState)("..."),x=Object(d.a)(O,2),v=(x[0],x[1]),y=function(){var e=Object(i.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/reader-dashboard/reader-challenge-id/?reader_id=".concat(t,"&challenge_id=").concat(a),{method:"DELETE",headers:{token:localStorage.token}});case 3:return e.sent,e.next=6,s(r.filter((function(e){return e.id!==a})));case 6:h.a.warning("You have left the reading challenge."),0===r.length&&c(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){0===r.length&&c(!1)})),Object(j.jsx)("div",{className:"my-2",children:r.map((function(e,c){return Object(j.jsx)(n.Fragment,{children:Object(j.jsx)("div",{className:"challenge-card",children:Object(j.jsxs)("div",{className:"challenge-content",children:[Object(j.jsxs)("div",{className:"challenge-titles",children:[Object(j.jsx)("p",{children:e.organization}),Object(j.jsx)("h3",{value:e.id,children:e.challenge_name},110),Object(j.jsx)("div",{children:m?"...":Object(j.jsx)(p,{reader:a,setAuth:t,challenge:e,setTotal:v,setCalculating:g,displayTotal:l})},(e.challege_id+1).toString())]}),a.id!==e.challenge_admin?Object(j.jsx)("div",{className:"leave-challenge",children:Object(j.jsx)("p",{onClick:function(){return y(a.id,e.id)},children:"+"})}):Object(j.jsx)(n.Fragment,{children:Object(j.jsx)(f,{challenge:e,reader:a,setReadersChallenges:s,readersChallenges:r})},e.id.toString())]})})},e.id.toString())}))})},x=function(e){e.setAuth;var t=e.setCreateChallenge,a=e.reader,r=Object(n.useState)({challenge_name:"",organization:"",challenge_type:"chapters",goal:""}),s=Object(d.a)(r,2),c=s[0],u=s[1],b=Object(n.useState)(""),m=Object(d.a)(b,2),p=m[0],f=m[1],O=c.challenge_name,x=c.organization,v=c.challenge_type,y=c.goal,k=function(e){u(Object(l.a)(Object(l.a)({},c),{},Object(g.a)({},e.target.name,e.target.value)))},_=function(e){console.log("radio clicked"),u(Object(l.a)(Object(l.a)({},c),{},{challenge_type:e.target.value}))},C=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.id,r={reader_id:t,challenge_id:n=p},e.next=5,fetch("/find-challenges",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 5:return s=e.sent,console.log("reader_id: ".concat(t," challenge_id: ").concat(n)),e.abrupt("return",s.json());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){p&&(console.log("newChallengeId state is not falsey"),C())}),[p]);var N=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a={challenge_name:O,organization:x,challenge_type:v,goal:y},e.next=5,fetch("/challenge-dashboard",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(a)});case 5:if(401!==(n=e.sent).status){e.next=8;break}return e.abrupt("return",h.a.error("Challenge Name already exists"));case 8:return e.next=10,n.json().then((function(e){return f(e.id)})).then((function(){return console.log(p)})).then((function(){return C()}));case 10:console.log(p),u({challenge_name:"",organization:"",challenge_type:"chapters",goal:""}),window.location="/",e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0.message),h.a.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)("h3",{children:"Create or Change Challenge"}),Object(j.jsxs)("form",{onSubmit:N,children:[Object(j.jsx)("input",{required:!0,className:"form-control my-3",type:"text",name:"challenge_name",placeholder:"Challenge Name",value:O,onChange:function(e){return k(e)}}),Object(j.jsx)("input",{required:!0,className:"form-control my-3",type:"text",name:"organization",placeholder:"Organization (church name, bible study, facebook group etc.)",value:x,onChange:function(e){return k(e)}}),Object(j.jsx)("h3",{children:"Select Challenge Type"}),Object(j.jsxs)("div",{className:"form-check-inline",children:[Object(j.jsx)("input",{autoComplete:"off",id:"chapters",className:"btn-check",type:"radio",name:"challenge-type",onClick:function(e){return _(e)},value:"chapters"}),Object(j.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"chapters",children:"Read Chapters"}),Object(j.jsx)("input",{id:"books",disabled:!0,className:"btn-check",autoComplete:"off",type:"radio",name:"challenge-type",value:"books",onClick:function(e){return _(e)}}),Object(j.jsx)("label",{className:"btn btn-outline-primary my-3 mx-3",htmlFor:"books",children:"Read Books"}),Object(j.jsx)("input",{id:"verses",disabled:!0,className:"btn-check",type:"radio",name:"challenge-type",value:"verses",onClick:function(e){return _(e)}}),Object(j.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"verses",children:"Memorize Verses"})]}),Object(j.jsx)("input",{required:!0,className:"form-control my-3",type:"number",name:"goal",placeholder:"Challenge Goal",value:y,onChange:function(e){return k(e)}}),Object(j.jsx)("button",{className:"btn btn-outline-success btn-lg mx-2",children:"Submit"}),Object(j.jsx)("button",{className:"btn btn-outline-danger btn-lg my-2",onClick:function(){return t(!1)},children:"Cancel"})]})]})},v=(a(36),function(e){e.setAuth;var t=e.reader,a=t.chapters_read;t.books_read,t.verses_memorized;return console.log(a),console.log(t),Object(j.jsx)(n.Fragment,{children:Object(j.jsx)("div",{className:"container-reader",children:Object(j.jsxs)("div",{className:"stats",children:[Object(j.jsxs)("h4",{children:["Welcome ",t.first_name,":"]}),Object(j.jsxs)("p",{id:"chapters",children:[a," chapters"]})]})})})}),y=function(e){e.setAuth;var t=e.reader,a=e.setReader,r=e.toggleFG,s=e.toggleFC,c=e.findingChallenge,u=Object(n.useState)(!1),b=Object(d.a)(u,2),h=(b[0],b[1],Object(n.useState)("")),m=Object(d.a)(h,2),p=m[0],f=m[1],O=Object(n.useState)(""),x=Object(d.a)(O,2),v=x[0],y=x[1],k=Object(n.useState)(""),_=Object(d.a)(k,2),C=_[0],N=_[1],w=Object(n.useState)(""),S=Object(d.a)(w,2),F=S[0],T=S[1],R=Object(n.useState)(""),G=Object(d.a)(R,2),A=(G[0],G[1],function(){f(""),y(""),N("")}),z=function(e,n){var r=t[n]+Number(e);a(Object(l.a)(Object(l.a)({},t),{},Object(g.a)({},n,r)))},E=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),T(a.target.name),e.prev=2,n=F,r=F,s=t.id,z(c="chapters_read"===n?p:"books_read"===n?v:C,F),l={challenge_type:r,total:c,reader_id:s},e.next=10,fetch("/submit-report/",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(l)});case 10:return i=e.sent,e.next=13,i.json();case 13:d=e.sent,console.log(d),A(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(n.Fragment,{children:[Object(j.jsxs)("div",{className:"nav-buttons",children:[Object(j.jsx)("button",{type:"button",className:"nav-btn","data-toggle":"modal","data-target":"#thing",children:"Report Reading"}),Object(j.jsx)("button",{type:"button",className:"nav-btn",onClick:function(){return r()},children:"Family Group"}),!c&&Object(j.jsx)("button",{type:"button",className:"nav-btn",onClick:function(){return s()},children:"More Challenges"})]}),Object(j.jsx)("div",{className:"modal fade",id:"thing",tabindex:"-1","aria-labelledby":"edit-challenge","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",style:{"z-index":"2"},children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",children:[Object(j.jsxs)("h3",{class:"modal-title",id:"thing",style:{color:"black"},children:["Report Reading for ",t.first_name]}),Object(j.jsx)("button",{type:"button",className:"btn-close close","data-bs-dismiss":"modal","aria-label":"Close","data-dismiss":"modal",onClick:function(){return A()}})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsxs)("form",{className:"form-control",children:[Object(j.jsx)("div",{className:"form-control bg-light text-black",children:Object(j.jsxs)("lable",{htmlFor:"Chapters",className:"mr-2",children:["Chapters Read",Object(j.jsx)("input",{className:"form-control mt-1",type:"number",name:"chapters_read",placeholder:"0",onChange:function(e){return function(e){return e.preventDefault(),T(e.target.name),"chapters_read"===e.target.name?f(e.target.value):"books_read"===e.target.name?y(e.target.value):void N(e.target.value)}(e)},value:p}),Object(j.jsx)("button",{type:"button",name:"chapters_read",htmlFor:"chapters_memorized",className:"btn btn-primary","data-dismiss":"modal",onClick:function(e){return E(e)},children:"Save changes"})]})}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{class:"modal-footer"})]})})]})})})]})},k=function(e){e.setAuth;var t=e.adReader,a=e.displayTotal,r=e.setDisplayTotal,s=t.name,c=t.chapters_read,u=t.books_read,b=t.verses_memorized,h=Object(n.useState)({chapters_read:"",books_read:"",verses_memorized:""}),m=Object(d.a)(h,2),p=m[0],f=m[1],O=Object(n.useState)(""),x=Object(d.a)(O,2),v=x[0],y=x[1],k=Object(n.useState)({chapters_read:"",books_read:"",verses_memorized:""}),_=Object(d.a)(k,2),C=_[0],N=_[1];Object(n.useEffect)((function(){r({chapters_read:c,books_read:u,verses_memorized:b}),N({chapters_read:c,books_read:u,verses_memorized:b})}),[s,c,u,b,r]);var w=function(e,t){console.log("".concat(t,": ").concat(C[t]));var n=Number(C[t])+Number(e);console.log(n),N(Object(l.a)(Object(l.a)({},C),{},Object(g.a)({},t,n))),r(Object(l.a)(Object(l.a)({},a),{},Object(g.a)({},t,n)))},S=function(){f({chapters_read:"",books_read:"",verses_memorized:""})},F=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),y(a.target.name),e.prev=2,n=v,r=v,s=t.ad_reader_id,"chapters_read"===n?(c=p.chapters_read,w(c,v)):"books_read"===n?(c=p.books_read,w(c,v)):(c=p.verses_memorized,w(c,v)),l={challenge_type:r,total:c,ad_reader_id:s},e.next=10,fetch("/additional-readers",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(l)});case 10:return i=e.sent,e.next=13,i.json();case 13:d=e.sent,console.log(d),S(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),T="ad".concat(t.ad_reader_id),R="#ad".concat(t.ad_reader_id);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("h5",{children:["Chapters: ",C.chapters_read]}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{type:"button",class:"btn btn-primary btn-sm","data-toggle":"modal","data-target":R,children:"Report Reading"}),Object(j.jsx)("div",{className:"modal fade",id:T,tabindex:"-1","aria-labelledby":"edit-challenge","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",children:[Object(j.jsxs)("h3",{class:"modal-title",id:T,children:["Report Reading for: ",s]}),Object(j.jsx)("button",{type:"button",className:"btn-close close","data-bs-dismiss":"modal","aria-label":"Close","data-dismiss":"modal",onClick:function(){return S()}})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsxs)("form",{className:"",children:[Object(j.jsx)("div",{className:"form-control bg-light text-black",children:Object(j.jsxs)("lable",{htmlFor:"Chapters",className:"mr-2",children:["Chapters Read",Object(j.jsx)("input",{className:"form-control mt-1",type:"number",name:"chapters_read",placeholder:"0",onChange:function(e){return function(e){return e.preventDefault(),y(e.target.name),"chapters_read"===e.target.name?f(Object(l.a)(Object(l.a)({},p),{},{chapters_read:e.target.value})):"books_read"===e.target.name?f(Object(l.a)(Object(l.a)({},p),{},{books_read:e.target.value})):(f(Object(l.a)(Object(l.a)({},p),{},{verses_memorized:e.target.value})),void console.log("you changed something"))}(e)},value:p.chapters_read}),Object(j.jsx)("button",{type:"button",name:"chapters_read",htmlFor:"chapters_read",className:"btn btn-primary","data-dismiss":"modal",onClick:function(e){return F(e)},children:"Save changes"})]})}),Object(j.jsx)("div",{class:"modal-footer"})]})})]})})})]})},_=function(e){e.setAuth;var t=e.reader,a=Object(n.useState)({familyName:"",familyPassword:""}),r=Object(d.a)(a,2),s=r[0],c=r[1],u=s.familyName,b=s.familyPassword,m=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s,c,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log("you submitted something."),n=u,r=b,s=t.id,e.prev=5,c={family_name:n,fg_password:r,reader_id:s},e.next=9,fetch("/family-group/add-reader",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(c)});case 9:return l=e.sent,e.next=12,l.json();case 12:if(i=e.sent,window.location="/",401!==i.status){e.next=16;break}return e.abrupt("return",h.a.error("Password or Family Name is incorrect"));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){c(Object(l.a)(Object(l.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#joinFGModal",children:"Join A Family Group"}),Object(j.jsx)("div",{class:"modal fade",id:"joinFGModal",tabindex:"-1","aria-labelledby":"joinFGModalLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",children:[Object(j.jsx)("h5",{class:"modal-title",id:"joinFGModalLabel",children:"Join a Family Group"}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){c({familyName:"",familyPassword:""})}})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsx)("form",{onSubmit:m,id:"join-family-group",children:Object(j.jsxs)("lable",{htmlFor:"familyName",className:"bg-light text-black form-control",children:["Family Group Name",Object(j.jsx)("input",{className:" form-control mt-1 mb-1",type:"character",name:"familyName",placeholder:"",value:u,onChange:function(e){return p(e)}}),"Family Group Password",Object(j.jsx)("input",{className:" form-control mt-1",type:"password",name:"familyPassword",placeholder:"",value:b,onChange:function(e){return p(e)}})]})})}),Object(j.jsxs)("div",{class:"modal-footer",children:[Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(j.jsx)("button",{type:"submit",class:"btn btn-primary",form:"join-family-group",children:"Submit"})]})]})})})]})},C=function(e){e.setAuth;var t=e.reader,a=e.setFamGroup,r=e.setInFamGroup,s=Object(n.useState)({familyName:"",familyPassword:"",confirmPassword:""}),c=Object(d.a)(s,2),u=c[0],b=c[1],m=u.familyName,p=u.familyPassword,f=u.confirmPassword,O=function(e){b(Object(l.a)(Object(l.a)({},u),{},Object(g.a)({},e.target.name,e.target.value)))},x=function(){b({familyName:"",familyPassword:"",confirmPassword:""})},v=function(){var e=Object(i.a)(o.a.mark((function e(n){var s,c,l,i,d,u,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("you submitted something."),s=m,c=p,l=t.id,e.prev=5,i={family_name:s,fg_password:c,reader_id:l},e.next=9,fetch("/family-group/",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(i)});case 9:return d=e.sent,e.next=12,d.json();case 12:if(401!==(u=e.sent).status){e.next=15;break}return e.abrupt("return",h.a.error("family name already taken!"));case 15:b=u.family_name,a({family_name:b}),r(!0),window.location="/",e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),console.error(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{type:"button",className:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#createFGModal",children:"Create Family Group"}),Object(j.jsx)("div",{class:"modal fade",id:"createFGModal",tabindex:"-1","aria-labelledby":"createFGModalLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",children:[Object(j.jsx)("h5",{class:"modal-title",id:"createFGModalLabel",children:"Create a Family Group"}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){return x()}})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsx)("form",{onSubmit:v,id:"create-family-group",children:Object(j.jsxs)("lable",{htmlFor:"familyName",className:"bg-light text-black form-control",children:["Name Family Group",Object(j.jsx)("input",{className:" form-control mt-1 mb-1",type:"character",name:"familyName",placeholder:"",value:m,onChange:function(e){return O(e)}}),"Create Password for Family Group",Object(j.jsx)("input",{className:" form-control mt-1",type:"password",name:"familyPassword",placeholder:"",value:p,onChange:function(e){return O(e)}}),"Confirm Password",Object(j.jsx)("input",{className:" form-control mt-1",type:"password",name:"confirmPassword",placeholder:"",value:f,onChange:function(e){return O(e)}})]})})}),Object(j.jsxs)("div",{class:"modal-footer",children:[Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function(){return x()},children:"Close"}),Object(j.jsx)("button",{"data-dismiss":"modal",type:"submit",class:"btn btn-primary",form:"create-family-group",children:"Submit"})]})]})})})]})},N=a(25),w=function(e){e.setAuth;var t=e.reader,a=e.adReaders,r=e.setAdReaders,s=e.famGroup,c=e.setCheckAdReaders,l=e.checkAdReaders,u=e.leaveFG,b=Object(n.useState)({name:""}),m=Object(d.a)(b,2),p=m[0],g=m[1],f=p.name,O=function(){g({name:""})},x=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,n=s.id,console.log("I'm in the adReaderJoinFG func: ".concat(a," ").concat(n,"...")),e.prev=3,r={ad_reader_id:a,fg_id:n},e.next=7,fetch("/family-group/add-additional-reader",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 7:return c=e.sent,e.next=10,c.json();case 10:l=e.sent,console.log(l),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(o.a.mark((function e(n){var i,d,u,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,i=t.id,d={name:f,reader_id:i},f){e.next=6;break}throw new Error("New reader must have a name!");case 6:return e.next=8,fetch("/additional-readers",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(d)});case 8:return u=e.sent,e.next=11,u.json();case 11:if(b=e.sent,console.log(b.ad_reader_id),!b){e.next=21;break}return e.next=16,x(b.ad_reader_id,s.id);case 16:r([].concat(Object(N.a)(a),[{name:f,chapters_read:0,books_read:0,verses_memorized:0}])),O(),c(!l),e.next=22;break;case 21:console.log("adREaderJoinFG didn't work");case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(1),console.error(e.t0.message),h.a.error(e.t0.message);case 28:return e.abrupt("return",console.log("you submitted something"));case 29:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"d-grid gap-2 col-6 mx-auto",children:[Object(j.jsx)("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#make-additional-reader",children:"Add Family Group Member"}),Object(j.jsx)("button",{button:!0,type:"button",className:"btn btn-outline-danger btn-sm",onClick:function(){return u()},children:"Leave Family Group"})]}),Object(j.jsx)("div",{class:"modal fade",id:"make-additional-reader",tabindex:"-1","aria-labelledby":"make-additional-readerLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",children:[Object(j.jsx)("h5",{class:"modal-title",id:"make-additional-readerLabel",children:"Create a new Family Group Member"}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsx)("form",{onSubmit:v,id:"make-additional-readerform",children:Object(j.jsxs)("lable",{htmlFor:"familyName",className:"bg-light text-black form-control",children:["Name the new member.",Object(j.jsx)("input",{className:" form-control mt-1 mb-1",type:"character",name:"name",placeholder:"",value:f,onChange:function(e){return function(e){e.preventDefault(),g({name:e.target.value})}(e)}})]})})}),Object(j.jsxs)("div",{class:"modal-footer",children:[Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function(){return O()},children:"Close"}),Object(j.jsx)("button",{type:"submit","data-dismiss":"modal",class:"btn btn-primary",form:"make-additional-readerform",children:"Submit"})]})]})})})]})},S=function(e){e.setAuth;var t=e.adReader,a=e.reader,n=e.adReaders,r=e.setAdReaders,s=e.famGroup;console.log(t);var c=function(){var e=Object(i.a)(o.a.mark((function e(){var c,l,i,d,u,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.id,l=t.ad_reader_id,i=s.id,e.prev=3,d={reader_id:c,ad_reader_id:l,fg_id:i},e.next=7,fetch("/additional-readers",{method:"DELETE",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(d)});case 7:if(u=e.sent,console.log(u.status),403!==u.status){e.next=11;break}return e.abrupt("return",h.a.error("You must be creator of reader to delete reader."));case 11:b=n.filter((function(e){return e.ad_reader_id!==l})),r(b),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("button",{type:"button",style:{float:"right"},className:"btn btn-sm btn-danger",onClick:function(){return c()},children:"Delete Reader"})},F=function(e){var t=e.setAuth,a=e.reader,r=e.displayTotal,s=e.setDisplayTotal,c=Object(n.useState)(!1),l=Object(d.a)(c,2),u=l[0],b=l[1],h=Object(n.useState)({}),m=Object(d.a)(h,2),p=m[0],g=m[1],f=Object(n.useState)([{name:void 0,chapters_read:"",books_read:"",verses_memorized:""}]),O=Object(d.a)(f,2),x=O[0],v=O[1],y=Object(n.useState)(!0),N=Object(d.a)(y,2),F=N[0],T=N[1],R=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/family-group",{method:"GET",headers:{token:localStorage.token}});case 3:if(401!==(t=e.sent).status){e.next=8;break}return console.log("You are not in a family group"),D(!1),e.abrupt("return");case 8:return console.log(t),e.next=11,t.json();case 11:a=e.sent,g(a),b(!0),D(!1),console.log(a),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.id,n=p.id,e.prev=2,r={reader_id:t,fg_id:n},e.next=6,fetch("/family-group/remove-reader",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 6:return s=e.sent,e.next=9,s.json();case 9:c=e.sent,console.log(c),window.location="/",e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){R()}),[]);var A=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/additional-readers",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,v(a),console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){A()}),[F]);var z=Object(n.useState)(!0),E=Object(d.a)(z,2),P=E[0],D=E[1];return Object(j.jsx)("div",{className:"",children:P?Object(j.jsx)("h4",{children:"loading..."}):Object(j.jsx)("div",{children:u?Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)("div",{className:"family-title",children:Object(j.jsxs)("p",{children:["Family Group:"," ",Object(j.jsx)("strong",{children:p.family_name})]})}),Object(j.jsxs)("div",{className:"family-group",children:[console.log(x),x.map((function(e,c){return Object(j.jsxs)("div",{className:"family-member",children:[Object(j.jsxs)("h4",{style:{backgroundColor:"rgba(252, 169, 3, .25)"},children:[e.name,":"," "]},c),Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)(k,{adReader:e,adReaders:x,setAdReaders:v,displayTotal:r,setDisplayTotal:s})," ",Object(j.jsx)(S,{setAuth:t,adReader:e,setAdReaders:v,adReaders:x,reader:a,setCheckAdReaders:T,famGroup:p})]},c+1)]})})),Object(j.jsx)("div",{className:"family-options",children:Object(j.jsx)(w,{setAuth:t,reader:a,adReaders:x,setAdReaders:v,famGroup:p,setCheckAdReaders:T,checkAdReaders:F,leaveFG:G})})]})]}):Object(j.jsx)("div",{className:"form-control my-2",children:Object(j.jsxs)("div",{className:"row justify-content-center",children:[Object(j.jsx)("p",{children:"You are not in a family Group yet. Family Groups allows you to report for readers who are not able to make reading reports for themselves (such as children)"}),Object(j.jsxs)("div",{className:"d-grid gap-2 col-6 mx-auto",children:[Object(j.jsx)(_,{setAuth:t,reader:a}),Object(j.jsx)(C,{setAuth:t,reader:a,setFamGroup:g,setInFamGroup:b})]})]})})})})},T=function(e){var t=e.setAuth,a=Object(n.useState)(""),r=Object(d.a)(a,2),s=r[0],c=r[1],l=Object(n.useState)(!1),u=Object(d.a)(l,2),b=u[0],p=u[1],g=Object(n.useState)([]),f=Object(d.a)(g,2),k=f[0],_=f[1],C=Object(n.useState)(!1),N=Object(d.a)(C,2),w=N[0],S=N[1],T=Object(n.useState)(!1),R=Object(d.a)(T,2),G=R[0],A=R[1],z=Object(n.useState)(!1),E=Object(d.a)(z,2),P=E[0],D=E[1];function J(){return L.apply(this,arguments)}function L(){return(L=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function I(){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/reader-dashboard/reader-challenge-id/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:0!==(a=e.sent).length&&(p(!0),_(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}console.log(k);Object(n.useEffect)((function(){J(),I()}),[b]);var Y=Object(n.useState)({chapters_read:"",books_read:"",verses_memorized:""}),U=Object(d.a)(Y,2),q=U[0],B=U[1],V=function(){D(!1===P)},W=Object(j.jsx)(n.Fragment,{children:Object(j.jsxs)("div",{className:"form-control mb-2",children:[Object(j.jsx)(m,{setAuth:t,readersChallenges:k,setReadersChallenges:_,setInReadingChallenge:p,checkChallenge:I,toggleFC:function(){return V()},findingChallenge:P,setFindingChallenge:D}),Object(j.jsx)("button",{className:"btn btn-outline-info",onClick:function(){return S(!0)},children:"Create Challenge"})]})});return Object(j.jsxs)(n.Fragment,{children:[Object(j.jsxs)("nav",{className:"nav-container",children:[Object(j.jsx)(v,{reader:s}),Object(j.jsx)("div",{className:"nav-buttons",children:Object(j.jsx)(y,{setAuth:t,reader:s,setReader:c,toggleFG:function(){A(!1===G)},toggleFC:function(){return V()},findingChallenge:P})})]}),Object(j.jsxs)("main",{children:[w||b?P&&W:W,Object(j.jsxs)("div",{className:"mt-5",children:[w&&Object(j.jsx)(x,{setAuth:t,setCreateChallenge:S,reader:s}),G&&Object(j.jsx)(F,{setAuth:t,reader:s,setDisplayTotal:B,displayTotal:q}),!w&&b&&Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(O,{reader:s,getReader:J,setAuth:t,readersChallenges:k,setReadersChallenges:_,setInReadingChallenge:p,displayTotal:q})})]})]}),Object(j.jsx)("button",{className:"btn btn-warning text-white btn-sm mb-5",onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),h.a.success("You logged out successfully!")}(e)},children:"Logout"})]})},R=function(e){var t=e.setAuth,a=Object(n.useState)({email:"",user_password:"",first_name:"",last_name:""}),r=Object(d.a)(a,2),s=r[0],c=r[1],b=s.email,m=s.user_password,p=s.first_name,f=s.last_name,O=function(e){c(Object(l.a)(Object(l.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={email:b,user_password:m,first_name:p,last_name:f},e.next=5,fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:(s=e.sent).token?(localStorage.setItem("token",s.token),t(!0),h.a.success("Registered Successfully")):(t(!1),h.a.error(s)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)("h1",{className:"text-center my-5",children:"Register"}),Object(j.jsxs)("form",{onSubmit:x,children:[Object(j.jsx)("input",{className:"form-control my-3",type:"text",name:"first_name",placeholder:"First Name",value:p,onChange:function(e){return O(e)}}),Object(j.jsx)("input",{className:"form-control my-3",type:"text",name:"last_name",placeholder:"Last Name",value:f,onChange:function(e){return O(e)}}),Object(j.jsx)("input",{type:"email",name:"email",placeholder:"Email",className:"form-control my-3",value:b,onChange:function(e){return O(e)}}),Object(j.jsx)("input",{className:"form-control my-3",type:"password",name:"user_password",placeholder:"Password",value:m,onChange:function(e){return O(e)}}),Object(j.jsx)("button",{className:"btn btn-success btn-block",children:"Submit"})]}),Object(j.jsx)(u.b,{to:"/login",children:"Login"})]})},G=function(e){var t=e.setAuth,a=Object(n.useState)({email:"",user_password:""}),r=Object(d.a)(a,2),s=r[0],c=r[1],b=s.email,m=s.user_password,p=function(e){c(Object(l.a)(Object(l.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={email:b,user_password:m},e.next=5,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,console.log("body: ".concat(n,", response: ").concat(r)),e.next=9,r.json();case 9:(s=e.sent).token?(localStorage.setItem("token",s.token),t(!0),h.a.success("login successfull!")):(t(!1),h.a.error(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)("h1",{className:"text-center my-5",children:"Login to start reporting!"}),Object(j.jsxs)("form",{onSubmit:f,children:[Object(j.jsx)("input",{className:"form-control my-3",type:"email",name:"email",placeholder:"Email",value:b,onChange:function(e){return p(e)}}),Object(j.jsx)("input",{className:"form-control",type:"password",name:"user_password",placeholder:"Password",value:m,onChange:function(e){return p(e)}}),Object(j.jsx)("button",{className:"btn btn-success btn-block my-2",children:"Submit"})]}),Object(j.jsx)(u.b,{to:"/register",children:"Register"})]})};h.a.configure();var A=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],r=t[1],s=function(e){r(e)};function c(){return(c=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/is-verify",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,r(!0===a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){c.apply(this,arguments)}()})),Object(j.jsx)(n.Fragment,{children:Object(j.jsx)(u.a,{children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)(b.d,{children:[Object(j.jsx)(b.b,{exact:!0,path:"/login",render:function(e){return a?Object(j.jsx)(b.a,{to:"/dashboard"}):Object(j.jsx)(G,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(j.jsx)(b.b,{exact:!0,path:"/",render:function(e){return a?Object(j.jsx)(b.a,{to:"/dashboard"}):Object(j.jsx)(G,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(j.jsx)(b.b,{exact:!0,path:"/register",render:function(e){return a?Object(j.jsx)(b.a,{to:"/login"}):Object(j.jsx)(R,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(j.jsx)(b.b,{exact:!0,path:"/dashboard",render:function(e){return a?Object(j.jsx)(T,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(j.jsx)(b.a,{to:"/login"})}}),Object(j.jsx)(b.b,{exact:!0,path:"/challenge-dashboard",render:function(e){return a?Object(j.jsx)(x,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(j.jsx)(b.a,{to:"/login"})}}),Object(j.jsx)(b.b,{exact:!0,path:"/readers/:id",render:function(e){return a?Object(j.jsx)(v,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(j.jsx)(b.a,{to:"/login"})}}),Object(j.jsx)(b.b,{path:"*",render:function(e){return a?Object(j.jsx)(T,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(j.jsx)(b.a,{to:"/login"})}})]})})})})};s.a.render(Object(j.jsx)(A,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.3c75fc67.chunk.js.map