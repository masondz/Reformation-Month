(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,a){},32:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(17),s=a.n(r),c=(a(30),a(2)),o=a.n(c),l=a(3),i=a(5),d=a(4),u=(a(32),a(14)),b=a(8),m=a(6),h=(a(33),a(0)),j=function(e){e.setAuth;var t=e.setInReadingChallenge,a=(e.setReadersChallenges,e.readersChallenges,e.checkChallenge),r=Object(n.useState)([]),s=Object(d.a)(r,2),c=s[0],u=s[1],b=Object(n.useState)({challenge_name:"",id:"",organization:""}),j=Object(d.a)(b,2),p=j[0],g=j[1],f=p.challenge_name,O=p.id;p.organization;function x(){return(x=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/find-challenges",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,u(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]);var v=Object(n.useState)("Blank id"),y=Object(d.a)(v,2),k=y[0],_=y[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,_(a.id),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[k]),Object(n.useEffect)((function(){!function(){for(var e=0;e<c.length;e++)c[e].challenge_name===p.challenge_name&&g({challenge_name:c[e].challenge_name,organization:c[e].organization,id:c[e].id})}()}),[f,c]);var C=function(){var e=Object(i.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={reader_id:k,challenge_id:O},e.next=7,fetch("/find-challenges",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)}).then((function(e){e.json().then((function(e){return console.log(e)})),200===e.status?(m.a.success("You have joined the ".concat(f," challenge!")),t(!0),a()):401===e.status?m.a.error("You have already joined challenge: ".concat(f)):400===e.status&&m.a.error("".concat(f," does not exists"))})).then(g({challenge_name:"",id:"",organization:""}));case 7:e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),N=Object(n.useState)(""),w=Object(d.a)(N,2);w[0],w[1];return Object(h.jsx)(n.Fragment,{children:Object(h.jsx)("form",{className:"container",onSubmit:C,children:Object(h.jsxs)("div",{className:"row align-items-end",children:[Object(h.jsx)("label",{htmlFor:"chal-list",children:"Find a reading Challenge"}),Object(h.jsx)("input",{value:f,onChange:function(e){return function(e){g(Object(l.a)(Object(l.a)({},p),{},{challenge_name:e.target.value}))}(e)},className:"form-control",list:"challenge-list",name:"chal-list",id:"chal-list",placeholder:"Search for reading challenge"}),Object(h.jsx)("datalist",{id:"challenge-list",children:c.map((function(e){return Object(h.jsxs)("option",{value:e.challenge_name,children:[e.challenge,": ",e.goal]},e.id)}))}),Object(h.jsx)("button",{className:"btn btn-outline-success  my-2",children:"Join"})]})})})},p=function(e){e.setAuth;var t=e.challenge,a=e.setCalculating,r=e.reader,s=e.displayTotal,c=Object(n.useState)("..."),l=Object(d.a)(c,2),u=l[0],b=l[1];console.log("ChallengeTotal challenge prop:"+t.challenge),console.log("displayTotal challenge prop:"+s);var m=Object(n.useState)(0),j=Object(d.a)(m,2),p=j[0],g=j[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){var n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.challenge,e.prev=2,e.next=5,fetch("/challenge-dashboard/challenge-total/".concat(n,"/").concat(r),{method:"GET",headers:{"Content-Type":"application/json",token:localStorage.token}});case 5:return s=e.sent,e.next=8,s.json();case 8:c=e.sent,console.log("getTotal query"+c),b(c.total),a(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}})()(),g(u/t.goal*100)}),[u,t.goal,t.id,r.chapters_read,r.books_read,r.verses_memorized,s.chapters_read,s.books_read,s.verses_memorized]),console.log(p),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"progress",children:Object(h.jsx)("div",{className:"progress-bar",style:{width:"".concat(p,"%")}})})}),Object(h.jsxs)("h3",{children:["Goal: ",u," / ",t.goal," ",t.challenge]})]})},g=a(7),f=function(e){var t=e.challenge,a=e.reader,r=(e.setReadersChallenges,e.readersChallenges);console.log(r);var s=Object(n.useState)({challenge_name:t.challenge_name,organization:t.organization,goal:t.goal,challenge_type:t.challenge,id:t.id}),c=Object(d.a)(s,2),u=c[0],b=c[1];console.log(u.challenge_type);var j={challenge_name:t.challenge_name,organization:t.organization,goal:t.goal,challenge_type:t.challenge,id:t.id},p=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.confirm("Are you sure you want to delete challenge?"),e.prev=1,!0!==n){e.next=19;break}return console.log("going to delete the challenge"),s=a.id,c=u.challenge_name,console.log(c,s),l={reader_id:s,challenge_name:c},console.log(r),e.next=11,fetch("/challenge-dashboard/",{method:"DELETE",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(l)});case 11:return i=e.sent,e.next=14,i.json();case 14:d=e.sent,console.log(d),202===i.status?window.location="/":401===i.status?m.a.error("Challenge already doesn't exist."):403===i.status&&m.a.error("You are not authorized to delete this challenge."),e.next=20;break;case 19:m.a.warning("Challenge not deleted.");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),console.error(e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e){e.preventDefault(),b(Object(l.a)(Object(l.a)({},u),{},Object(g.a)({},e.target.name,e.target.value)))},O=function(e){console.log("radio clicked"),e.preventDefault(),b(Object(l.a)(Object(l.a)({},u),{},Object(g.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n=a.id,r=u.challenge_name,s=u.organization,c=u.challenge_type,l=u.goal,i=u.id,d={reader_id:n,challenge_name:r,organization:s,challenge_type:c,goal:l,id:i},console.log(d),e.next=8,fetch("/challenge-dashboard/",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(d)});case 8:if(403!==e.sent.status){e.next=11;break}return e.abrupt("return",m.a.error("You are not authorized to change this challenge"));case 11:window.location="/",m.a.success("Reading Challenge updated!"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0.messages);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),v="id".concat(u.id),y="#id".concat(u.id);return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("button",{type:"button",class:"btn btn-info btn-sm","data-toggle":"modal","data-target":y,children:"Edit"}),Object(h.jsx)("div",{className:"modal fade",id:v,tabindex:"-1","aria-labelledby":"edit-challenge","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsxs)("h3",{class:"modal-title",id:v,children:["Edit Challenge ",u.challenge_name]}),Object(h.jsx)("button",{type:"button",className:"btn-close close","data-bs-dismiss":"modal","aria-label":"Close","data-dismiss":"modal",onClick:function(){return b(j)}})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsxs)("form",{className:"form-control",children:[Object(h.jsxs)("div",{className:"form-control bg-light text-black",children:[Object(h.jsx)("lable",{htmlFor:"goal",className:"mr-2",children:"Goal:"}),Object(h.jsx)("input",{className:"form-control mt-1",type:"number",name:"goal",onChange:function(e){return f(e)},value:u.goal})]}),Object(h.jsx)("br",{}),Object(h.jsxs)("lable",{htmlFor:"organization",className:"bg-light text-black form-control",children:["Organization:",Object(h.jsx)("input",{className:" form-control mt-1",type:"text",name:"organization",value:u.organization,onChange:function(e){return f(e)}})]}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"form-control bg-light",children:["Challenge Type:",Object(h.jsx)("br",{}),Object(h.jsx)("h4",{className:"OptionSign border border-secondary",children:u.challenge_type}),Object(h.jsxs)("div",{class:"btn-group ChallengeType bg-white",children:[Object(h.jsx)("button",{type:"button",className:"btn btn-outline-secondary",name:"challenge_type",onClick:function(e){return O(e)},value:"chapters",children:"Chapters"}),Object(h.jsx)("button",{type:"button",className:"btn btn-outline-secondary",value:"books",name:"challenge_type",onClick:function(e){return O(e)},children:"Books"}),Object(h.jsx)("button",{type:"button",className:"btn btn-outline-secondary",value:"verses",name:"challenge_type",onClick:function(e){return O(e)},children:"Verses"})]})]}),Object(h.jsx)("br",{})]})}),Object(h.jsxs)("div",{class:"modal-footer",children:[Object(h.jsx)("button",{type:"button",class:"btn btn-primary",onClick:function(e){return x(e)},children:"Save changes"}),Object(h.jsx)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal","data-dismiss":"modal",onClick:function(){p()},children:"Delete"})]})]})})})]})},O=function(e){var t=e.setAuth,a=e.reader,r=e.readersChallenges,s=e.setReadersChallenges,c=e.setInReadingChallenge,l=e.displayTotal;console.log("ReadeChallenges.js:displayTotal -"+l);a.first_name,a.last_name,a.chapters_read,a.books_read,a.versus_memorized,a.id;var u=Object(n.useState)(!1),b=Object(d.a)(u,2),j=b[0],g=b[1],O=Object(n.useState)("..."),x=Object(d.a)(O,2),v=(x[0],x[1]),y=function(){var e=Object(i.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/reader-dashboard/reader-challenge-id/?reader_id=".concat(t,"&challenge_id=").concat(a),{method:"DELETE",headers:{token:localStorage.token}});case 3:return e.sent,e.next=6,s(r.filter((function(e){return e.id!==a})));case 6:m.a.warning("You have left the reading challenge."),0===r.length&&c(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){0===r.length&&c(!1)})),Object(h.jsxs)("div",{className:"form-control",children:[Object(h.jsx)("h2",{children:"Reading challenges:"}),r.map((function(e,c){return Object(h.jsx)(n.Fragment,{children:Object(h.jsx)("ul",{children:Object(h.jsxs)("div",{className:"card p-3",children:[Object(h.jsxs)("div",{style:{backgroundColor:"lightgreen"},className:"d-flex justify-content-between",children:[Object(h.jsxs)("h3",{value:e.id,children:[console.log(a.id,e.challenge_admin),e.challenge_name," -"," ",Object(h.jsx)("i",{children:e.organization})]},110),a.id!==e.challenge_admin?Object(h.jsx)("button",{className:"btn btn-danger btn-sm px-3",onClick:function(){return y(a.id,e.id)},children:"Leave Challenge"}):Object(h.jsx)(n.Fragment,{children:Object(h.jsx)(f,{challenge:e,reader:a,setReadersChallenges:s,readersChallenges:r})},e.id.toString())]}),Object(h.jsx)("div",{children:j?"...":Object(h.jsx)(p,{reader:a,setAuth:t,challenge:e,setTotal:v,setCalculating:g,displayTotal:l})},(e.challege_id+1).toString())]})})},e.id.toString())}))]})},x=function(e){e.setAuth;var t=e.setCreateChallenge,a=e.reader,r=Object(n.useState)({challenge_name:"",organization:"",challenge_type:"chapters",goal:""}),s=Object(d.a)(r,2),c=s[0],u=s[1],b=Object(n.useState)(""),j=Object(d.a)(b,2),p=j[0],f=j[1],O=c.challenge_name,x=c.organization,v=c.challenge_type,y=c.goal,k=function(e){u(Object(l.a)(Object(l.a)({},c),{},Object(g.a)({},e.target.name,e.target.value)))},_=function(e){console.log("radio clicked"),u(Object(l.a)(Object(l.a)({},c),{},{challenge_type:e.target.value}))},C=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.id,r={reader_id:t,challenge_id:n=p},e.next=5,fetch("/find-challenges",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 5:return s=e.sent,console.log("reader_id: ".concat(t," challenge_id: ").concat(n)),e.abrupt("return",s.json());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){p&&(console.log("newChallengeId state is not falsey"),C())}),[p]);var N=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a={challenge_name:O,organization:x,challenge_type:v,goal:y},e.next=5,fetch("/challenge-dashboard",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(a)});case 5:if(401!==(n=e.sent).status){e.next=8;break}return e.abrupt("return",m.a.error("Challenge Name already exists"));case 8:return e.next=10,n.json().then((function(e){return f(e.id)})).then((function(){return console.log(p)})).then((function(){return C()}));case 10:console.log(p),u({challenge_name:"",organization:"",challenge_type:"chapters",goal:""}),window.location="/",e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0.message),m.a.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("h3",{children:"Create or Change Challenge"}),Object(h.jsxs)("form",{onSubmit:N,children:[Object(h.jsx)("input",{required:!0,className:"form-control my-3",type:"text",name:"challenge_name",placeholder:"Challenge Name",value:O,onChange:function(e){return k(e)}}),Object(h.jsx)("input",{required:!0,className:"form-control my-3",type:"text",name:"organization",placeholder:"Organization (church name, bible study, facebook group etc.)",value:x,onChange:function(e){return k(e)}}),Object(h.jsx)("h3",{children:"Select Challenge Type"}),Object(h.jsxs)("div",{className:"form-check-inline",children:[Object(h.jsx)("input",{autoComplete:"off",id:"chapters",className:"btn-check",type:"radio",name:"challenge-type",onClick:function(e){return _(e)},value:"chapters"}),Object(h.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"chapters",children:"Read Chapters"}),Object(h.jsx)("input",{id:"books",className:"btn-check",autoComplete:"off",type:"radio",name:"challenge-type",value:"books",onClick:function(e){return _(e)}}),Object(h.jsx)("label",{className:"btn btn-outline-primary my-3 mx-3",htmlFor:"books",children:"Read Books"}),Object(h.jsx)("input",{id:"verses",className:"btn-check",type:"radio",name:"challenge-type",value:"verses",onClick:function(e){return _(e)}}),Object(h.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"verses",children:"Memorize Verses"})]}),Object(h.jsx)("input",{required:!0,className:"form-control my-3",type:"number",name:"goal",placeholder:"Challenge Goal",value:y,onChange:function(e){return k(e)}}),Object(h.jsx)("button",{className:"btn btn-outline-success btn-lg mx-2",children:"Submit"}),Object(h.jsx)("button",{className:"btn btn-outline-danger btn-lg my-2",onClick:function(){return t(!1)},children:"Cancel"})]})]})},v=function(e){e.setAuth;var t=e.reader,a=t.chapters_read;t.books_read,t.verses_memorized;return console.log(a),console.log(t),Object(h.jsx)(n.Fragment,{children:Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"d-flex justify-content-lg-start align-items-center",children:[Object(h.jsxs)("h2",{className:"pe-3",children:["Chapters: ",t.chapters_read]}),Object(h.jsxs)("h2",{className:"pe-3",children:["Books: ",t.books_read]}),Object(h.jsxs)("h2",{className:"pe-3",children:["Verses: ",t.verses_memorized]})]})})})},y=function(e){e.setAuth;var t=e.reader,a=e.setReader,r=Object(n.useState)(!1),s=Object(d.a)(r,2),c=(s[0],s[1],Object(n.useState)("")),u=Object(d.a)(c,2),b=u[0],m=u[1],j=Object(n.useState)(""),p=Object(d.a)(j,2),f=p[0],O=p[1],x=Object(n.useState)(""),v=Object(d.a)(x,2),y=v[0],k=v[1],_=Object(n.useState)(""),C=Object(d.a)(_,2),N=C[0],w=C[1],S=Object(n.useState)(""),F=Object(d.a)(S,2),T=(F[0],F[1],function(){m(""),O(""),k("")}),R=function(e,n){var r=t[n]+Number(e);a(Object(l.a)(Object(l.a)({},t),{},Object(g.a)({},n,r)))},z=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),w(a.target.name),e.prev=2,n=N,r=N,s=t.id,R(c="chapters_read"===n?b:"books_read"===n?f:y,N),l={challenge_type:r,total:c,reader_id:s},e.next=10,fetch("/submit-report/",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(l)});case 10:return i=e.sent,e.next=13,i.json();case 13:d=e.sent,console.log(d),T(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e){return e.preventDefault(),w(e.target.name),"chapters_read"===e.target.name?m(e.target.value):"books_read"===e.target.name?O(e.target.value):void k(e.target.value)};return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("button",{type:"button",className:"btn btn-primary btn-block me-4","data-toggle":"modal","data-target":"#thing",children:"Report Reading"}),Object(h.jsx)("div",{className:"modal fade",id:"thing",tabindex:"-1","aria-labelledby":"edit-challenge","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsxs)("h3",{class:"modal-title",id:"thing",children:["Report Reading for ",t.first_name]}),Object(h.jsx)("button",{type:"button",className:"btn-close close","data-bs-dismiss":"modal","aria-label":"Close","data-dismiss":"modal",onClick:function(){return T()}})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsxs)("form",{className:"form-control",children:[Object(h.jsx)("div",{className:"form-control bg-light text-black",children:Object(h.jsxs)("lable",{htmlFor:"Chapters",className:"mr-2",children:["Chapters Read",Object(h.jsx)("input",{className:"form-control mt-1",type:"number",name:"chapters_read",placeholder:"0",onChange:function(e){return A(e)},value:b}),Object(h.jsx)("button",{type:"button",name:"chapters_read",htmlFor:"chapters_memorized",className:"btn btn-primary","data-dismiss":"modal",onClick:function(e){return z(e)},children:"Save changes"})]})}),Object(h.jsx)("br",{}),Object(h.jsxs)("lable",{htmlFor:"books_read",className:"bg-light text-black form-control",children:["Books Read",Object(h.jsx)("input",{className:"form-control mt-1",type:"number",name:"books_read",value:f,placeholder:"0",onChange:function(e){return A(e)}}),Object(h.jsx)("button",{"data-dismiss":"modal",type:"button",name:"books_read",htmlFor:"books_read",className:"btn btn-primary",onClick:function(e){return z(e)},children:"Save changes"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("form",{children:Object(h.jsxs)("lable",{htmlFor:"verses_memorized",className:"bg-light text-black form-control",children:["Verses Memorized",Object(h.jsx)("input",{className:" form-control mt-1",type:"number",name:"verses_memorized",value:y,placeholder:"0",onChange:function(e){return A(e)}}),Object(h.jsx)("button",{"data-dismiss":"modal",type:"button",name:"verses_memorized",htmlFor:"verses_memorized",className:"btn btn-primary",onClick:function(e){return z(e)},children:"Save changes"})]})}),Object(h.jsx)("div",{class:"modal-footer"})]})})]})})})]})},k=function(e){e.setAuth;var t=e.adReader,a=e.displayTotal,r=e.setDisplayTotal,s=t.name,c=t.chapters_read,u=t.books_read,b=t.verses_memorized,m=Object(n.useState)({chapters_read:"",books_read:"",verses_memorized:""}),j=Object(d.a)(m,2),p=j[0],f=j[1],O=Object(n.useState)(""),x=Object(d.a)(O,2),v=x[0],y=x[1],k=Object(n.useState)({chapters_read:"",books_read:"",verses_memorized:""}),_=Object(d.a)(k,2),C=_[0],N=_[1];Object(n.useEffect)((function(){r({chapters_read:c,books_read:u,verses_memorized:b}),N({chapters_read:c,books_read:u,verses_memorized:b})}),[s,c,u,b,r]);var w=function(e,t){console.log("".concat(t,": ").concat(C[t]));var n=Number(C[t])+Number(e);console.log(n),N(Object(l.a)(Object(l.a)({},C),{},Object(g.a)({},t,n))),r(Object(l.a)(Object(l.a)({},a),{},Object(g.a)({},t,n)))},S=function(){f({chapters_read:"",books_read:"",verses_memorized:""})},F=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),y(a.target.name),e.prev=2,n=v,r=v,s=t.ad_reader_id,"chapters_read"===n?(c=p.chapters_read,w(c,v)):"books_read"===n?(c=p.books_read,w(c,v)):(c=p.verses_memorized,w(c,v)),l={challenge_type:r,total:c,ad_reader_id:s},e.next=10,fetch("/additional-readers",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(l)});case 10:return i=e.sent,e.next=13,i.json();case 13:d=e.sent,console.log(d),S(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),T=function(e){return e.preventDefault(),y(e.target.name),"chapters_read"===e.target.name?f(Object(l.a)(Object(l.a)({},p),{},{chapters_read:e.target.value})):"books_read"===e.target.name?f(Object(l.a)(Object(l.a)({},p),{},{books_read:e.target.value})):(f(Object(l.a)(Object(l.a)({},p),{},{verses_memorized:e.target.value})),void console.log("you changed something"))},R="ad".concat(t.ad_reader_id),z="#ad".concat(t.ad_reader_id);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h3",{children:["Chapters: ",C.chapters_read," Books:"," ",C.books_read," Verses:"," ",C.verses_memorized]}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{type:"button",class:"btn btn-primary btn-sm","data-toggle":"modal","data-target":z,children:"Report Reading"}),Object(h.jsx)("div",{className:"modal fade",id:R,tabindex:"-1","aria-labelledby":"edit-challenge","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsxs)("h3",{class:"modal-title",id:R,children:["Report Reading for: ",s]}),Object(h.jsx)("button",{type:"button",className:"btn-close close","data-bs-dismiss":"modal","aria-label":"Close","data-dismiss":"modal",onClick:function(){return S()}})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsxs)("form",{className:"form-control",children:[Object(h.jsx)("div",{className:"form-control bg-light text-black",children:Object(h.jsxs)("lable",{htmlFor:"Chapters",className:"mr-2",children:["Chapters Read",Object(h.jsx)("input",{className:"form-control mt-1",type:"number",name:"chapters_read",placeholder:"0",onChange:function(e){return T(e)},value:p.chapters_read}),Object(h.jsx)("button",{type:"button",name:"chapters_read",htmlFor:"chapters_read",className:"btn btn-primary","data-dismiss":"modal",onClick:function(e){return F(e)},children:"Save changes"})]})}),Object(h.jsx)("br",{}),Object(h.jsxs)("lable",{htmlFor:"books_read",className:"bg-light text-black form-control",children:["Books Read",Object(h.jsx)("input",{className:"form-control mt-1",type:"number",name:"books_read",value:p.books_read,placeholder:"0",onChange:function(e){return T(e)}}),Object(h.jsx)("button",{"data-dismiss":"modal",type:"button",name:"books_read",htmlFor:"books_read",className:"btn btn-primary",onClick:function(e){return F(e)},children:"Save changes"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("form",{children:Object(h.jsxs)("lable",{htmlFor:"verses_memorized",className:"bg-light text-black form-control",children:["Verses Memorized",Object(h.jsx)("input",{className:" form-control mt-1",type:"number",name:"verses_memorized",value:p.verses_memorized,placeholder:"0",onChange:function(e){return T(e)}}),Object(h.jsx)("button",{"data-dismiss":"modal",type:"button",name:"verses_memorized",htmlFor:"verses_memorized",className:"btn btn-primary",onClick:function(e){return F(e)},children:"Save changes"})]})}),Object(h.jsx)("div",{class:"modal-footer"})]})})]})})})]})},_=function(e){e.setAuth;var t=e.reader,a=Object(n.useState)({familyName:"",familyPassword:""}),r=Object(d.a)(a,2),s=r[0],c=r[1],u=s.familyName,b=s.familyPassword,j=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s,c,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log("you submitted something."),n=u,r=b,s=t.id,e.prev=5,c={family_name:n,fg_password:r,reader_id:s},e.next=9,fetch("/family-group/add-reader",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(c)});case 9:return l=e.sent,e.next=12,l.json();case 12:if(i=e.sent,window.location="/",401!==i.status){e.next=16;break}return e.abrupt("return",m.a.error("Password or Family Name is incorrect"));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){c(Object(l.a)(Object(l.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))};return Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#joinFGModal",children:"Join A Family Group"}),Object(h.jsx)("div",{class:"modal fade",id:"joinFGModal",tabindex:"-1","aria-labelledby":"joinFGModalLabel","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsx)("h5",{class:"modal-title",id:"joinFGModalLabel",children:"Join a Family Group"}),Object(h.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){c({familyName:"",familyPassword:""})}})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsx)("form",{onSubmit:j,id:"join-family-group",children:Object(h.jsxs)("lable",{htmlFor:"familyName",className:"bg-light text-black form-control",children:["Family Group Name",Object(h.jsx)("input",{className:" form-control mt-1 mb-1",type:"character",name:"familyName",placeholder:"",value:u,onChange:function(e){return p(e)}}),"Family Group Password",Object(h.jsx)("input",{className:" form-control mt-1",type:"password",name:"familyPassword",placeholder:"",value:b,onChange:function(e){return p(e)}})]})})}),Object(h.jsxs)("div",{class:"modal-footer",children:[Object(h.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(h.jsx)("button",{type:"submit",class:"btn btn-primary",form:"join-family-group",children:"Submit"})]})]})})})]})},C=function(e){e.setAuth;var t=e.reader,a=e.setFamGroup,r=e.setInFamGroup,s=Object(n.useState)({familyName:"",familyPassword:"",confirmPassword:""}),c=Object(d.a)(s,2),u=c[0],b=c[1],j=u.familyName,p=u.familyPassword,f=u.confirmPassword,O=function(e){b(Object(l.a)(Object(l.a)({},u),{},Object(g.a)({},e.target.name,e.target.value)))},x=function(){b({familyName:"",familyPassword:"",confirmPassword:""})},v=function(){var e=Object(i.a)(o.a.mark((function e(n){var s,c,l,i,d,u,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("you submitted something."),s=j,c=p,l=t.id,e.prev=5,i={family_name:s,fg_password:c,reader_id:l},e.next=9,fetch("/family-group/",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(i)});case 9:return d=e.sent,e.next=12,d.json();case 12:if(401!==(u=e.sent).status){e.next=15;break}return e.abrupt("return",m.a.error("family name already taken!"));case 15:b=u.family_name,a({family_name:b}),r(!0),window.location="/",e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),console.error(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{type:"button",class:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#createFGModal",children:"Create Family Group"}),Object(h.jsx)("div",{class:"modal fade",id:"createFGModal",tabindex:"-1","aria-labelledby":"createFGModalLabel","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsx)("h5",{class:"modal-title",id:"createFGModalLabel",children:"Create a Family Group"}),Object(h.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){return x()}})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsx)("form",{onSubmit:v,id:"create-family-group",children:Object(h.jsxs)("lable",{htmlFor:"familyName",className:"bg-light text-black form-control",children:["Name Family Group",Object(h.jsx)("input",{className:" form-control mt-1 mb-1",type:"character",name:"familyName",placeholder:"",value:j,onChange:function(e){return O(e)}}),"Create Password for Family Group",Object(h.jsx)("input",{className:" form-control mt-1",type:"password",name:"familyPassword",placeholder:"",value:p,onChange:function(e){return O(e)}}),"Confirm Password",Object(h.jsx)("input",{className:" form-control mt-1",type:"password",name:"confirmPassword",placeholder:"",value:f,onChange:function(e){return O(e)}})]})})}),Object(h.jsxs)("div",{class:"modal-footer",children:[Object(h.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function(){return x()},children:"Close"}),Object(h.jsx)("button",{"data-dismiss":"modal",type:"submit",class:"btn btn-primary",form:"create-family-group",children:"Submit"})]})]})})})]})},N=a(25),w=function(e){e.setAuth;var t=e.reader,a=e.adReaders,r=e.setAdReaders,s=e.famGroup,c=e.setCheckAdReaders,l=e.checkAdReaders,u=Object(n.useState)({name:""}),b=Object(d.a)(u,2),j=b[0],p=b[1],g=j.name,f=function(){p({name:""})},O=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,n=s.id,console.log("I'm in the adReaderJoinFG func: ".concat(a," ").concat(n,"...")),e.prev=3,r={ad_reader_id:a,fg_id:n},e.next=7,fetch("/family-group/add-additional-reader",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 7:return c=e.sent,e.next=10,c.json();case 10:l=e.sent,console.log(l),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(o.a.mark((function e(n){var i,d,u,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,i=t.id,d={name:g,reader_id:i},g){e.next=6;break}throw new Error("New reader must have a name!");case 6:return e.next=8,fetch("/additional-readers",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(d)});case 8:return u=e.sent,e.next=11,u.json();case 11:if(b=e.sent,console.log(b.ad_reader_id),!b){e.next=21;break}return e.next=16,O(b.ad_reader_id,s.id);case 16:r([].concat(Object(N.a)(a),[{name:g,chapters_read:0,books_read:0,verses_memorized:0}])),f(),c(!l),e.next=22;break;case 21:console.log("adREaderJoinFG didn't work");case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(1),console.error(e.t0.message),m.a.error(e.t0.message);case 28:return e.abrupt("return",console.log("you submitted something"));case 29:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{style:{position:"relative",left:"32px"},type:"button",class:"btn btn-outline-primary d-inline-block","data-bs-toggle":"modal","data-bs-target":"#make-additional-reader",children:"Add Family Group Member"}),Object(h.jsx)("div",{class:"modal fade",id:"make-additional-reader",tabindex:"-1","aria-labelledby":"make-additional-readerLabel","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsx)("h5",{class:"modal-title",id:"make-additional-readerLabel",children:"Create a new Family Group Member"}),Object(h.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsx)("form",{onSubmit:x,id:"make-additional-readerform",children:Object(h.jsxs)("lable",{htmlFor:"familyName",className:"bg-light text-black form-control",children:["Name the new member.",Object(h.jsx)("input",{className:" form-control mt-1 mb-1",type:"character",name:"name",placeholder:"",value:g,onChange:function(e){return function(e){e.preventDefault(),p({name:e.target.value})}(e)}})]})})}),Object(h.jsxs)("div",{class:"modal-footer",children:[Object(h.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function(){return f()},children:"Close"}),Object(h.jsx)("button",{type:"submit","data-dismiss":"modal",class:"btn btn-primary",form:"make-additional-readerform",children:"Submit"})]})]})})})]})},S=function(e){e.setAuth;var t=e.adReader,a=e.reader,n=e.adReaders,r=e.setAdReaders,s=e.famGroup;console.log(t);var c=function(){var e=Object(i.a)(o.a.mark((function e(){var c,l,i,d,u,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.id,l=t.ad_reader_id,i=s.id,e.prev=3,d={reader_id:c,ad_reader_id:l,fg_id:i},e.next=7,fetch("/additional-readers",{method:"DELETE",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(d)});case 7:if(u=e.sent,console.log(u.status),403!==u.status){e.next=11;break}return e.abrupt("return",m.a.error("You must be creator of reader to delete reader."));case 11:b=n.filter((function(e){return e.ad_reader_id!==l})),r(b),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)("button",{type:"button",style:{float:"right"},className:"btn-sm btn-danger",onClick:function(){return c()},children:"Delete Reader"})},F=function(e){var t=e.setAuth,a=e.reader,r=e.displayTotal,s=e.setDisplayTotal,c=Object(n.useState)(!1),l=Object(d.a)(c,2),u=l[0],b=l[1],m=Object(n.useState)({}),j=Object(d.a)(m,2),p=j[0],g=j[1],f=Object(n.useState)([{name:void 0,chapters_read:"",books_read:"",verses_memorized:""}]),O=Object(d.a)(f,2),x=O[0],v=O[1],y=Object(n.useState)(!0),N=Object(d.a)(y,2),F=N[0],T=N[1],R=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/family-group",{method:"GET",headers:{token:localStorage.token}});case 3:if(401!==(t=e.sent).status){e.next=8;break}return console.log("You are not in a family group"),D(!1),e.abrupt("return");case 8:return console.log(t),e.next=11,t.json();case 11:a=e.sent,g(a),b(!0),D(!1),console.log(a),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.id,n=p.id,e.prev=2,r={reader_id:t,fg_id:n},e.next=6,fetch("/family-group/remove-reader",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 6:return s=e.sent,e.next=9,s.json();case 9:c=e.sent,console.log(c),window.location="/",e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){R()}),[]);var A=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/additional-readers",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,v(a),console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){A()}),[F]);var G=Object(n.useState)(!0),E=Object(d.a)(G,2),P=E[0],D=E[1];return Object(h.jsxs)("div",{className:"form-control",children:[Object(h.jsx)("h4",{children:Object(h.jsx)("i",{children:"Family Group"})}),P?Object(h.jsx)("h4",{children:"loading..."}):Object(h.jsx)("div",{children:u?Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:p.family_name}),console.log(x),x.map((function(e,c){return Object(h.jsx)("ul",{children:Object(h.jsxs)("div",{className:"form-control",children:[Object(h.jsxs)("h4",{style:{backgroundColor:"rgba(252, 169, 3, .25)"},children:[e.name,":"," "]},c),Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)(k,{adReader:e,adReaders:x,setAdReaders:v,displayTotal:r,setDisplayTotal:s})," ",Object(h.jsx)(S,{setAuth:t,adReader:e,setAdReaders:v,adReaders:x,reader:a,setCheckAdReaders:T,famGroup:p})]},c+1)]})})})),Object(h.jsx)(w,{setAuth:t,reader:a,adReaders:x,setAdReaders:v,famGroup:p,setCheckAdReaders:T,checkAdReaders:F}),Object(h.jsx)("button",{style:{float:"right",position:"relative",bottom:"40px"},button:!0,type:"button",className:"btn-sm btn btn-outline-danger mt-2 ",onClick:function(){return z()},children:"Leave Family Group"})]}):Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{children:"You are not in a family Group yet. Family Groups allows you to report for readers who are not able to make reading reports for themselves (such as children)"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(_,{setAuth:t,reader:a}),Object(h.jsx)(C,{setAuth:t,reader:a,setFamGroup:g,setInFamGroup:b})]})]})})]})},T=function(e){var t=e.setAuth,a=Object(n.useState)(""),r=Object(d.a)(a,2),s=r[0],c=r[1],l=Object(n.useState)(!1),u=Object(d.a)(l,2),b=u[0],p=u[1],g=Object(n.useState)([]),f=Object(d.a)(g,2),k=f[0],_=f[1],C=Object(n.useState)(!1),N=Object(d.a)(C,2),w=N[0],S=N[1],T=Object(n.useState)(!1),R=Object(d.a)(T,2),z=R[0],A=R[1];function G(){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function P(){return D.apply(this,arguments)}function D(){return(D=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/reader-dashboard/reader-challenge-id/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:0!==(a=e.sent).length&&(p(!0),_(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}console.log(k);Object(n.useEffect)((function(){G(),P()}),[b]);var J=Object(n.useState)({chapters_read:"",books_read:"",verses_memorized:""}),L=Object(d.a)(J,2),M=L[0],I=L[1];return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsxs)("h3",{style:{backgroundColor:"orange",width:"100%",padding:"3"},children:["Welcome ",s.first_name]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"card border-success p-2",children:[Object(h.jsx)(v,{reader:s}),Object(h.jsxs)("div",{children:[Object(h.jsx)(y,{setAuth:t,reader:s,setReader:c}),Object(h.jsx)("button",{type:"button",className:"btn btn-block btn-outline-danger",onClick:function(){A(!1===z)},children:"Family Group"})]})]}),Object(h.jsx)("br",{}),z&&Object(h.jsx)(F,{setAuth:t,reader:s,setDisplayTotal:I,displayTotal:M}),Object(h.jsx)("br",{}),!w&&b&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(O,{reader:s,getReader:G,setAuth:t,readersChallenges:k,setReadersChallenges:_,setInReadingChallenge:p,displayTotal:M})}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),!w&&Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("div",{className:"form-control mb-5",children:Object(h.jsx)(j,{setAuth:t,readersChallenges:k,setReadersChallenges:_,setInReadingChallenge:p,checkChallenge:P})}),Object(h.jsx)("button",{className:"btn btn-outline-info",onClick:function(){return S(!0)},children:"Create Challenge"})]})]}),Object(h.jsx)("div",{className:"mt-5",children:w&&Object(h.jsx)(x,{setAuth:t,setCreateChallenge:S,reader:s})}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{className:"btn btn-warning text-white btn-sm mb-5",onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),m.a.success("You logged out successfully!")}(e)},children:"Logout"})]})},R=function(e){var t=e.setAuth,a=Object(n.useState)({email:"",user_password:"",first_name:"",last_name:""}),r=Object(d.a)(a,2),s=r[0],c=r[1],b=s.email,j=s.user_password,p=s.first_name,f=s.last_name,O=function(e){c(Object(l.a)(Object(l.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={email:b,user_password:j,first_name:p,last_name:f},e.next=5,fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:(s=e.sent).token?(localStorage.setItem("token",s.token),t(!0),m.a.success("Registered Successfully")):(t(!1),m.a.error(s)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("h1",{className:"text-center my-5",children:"Register"}),Object(h.jsxs)("form",{onSubmit:x,children:[Object(h.jsx)("input",{className:"form-control my-3",type:"text",name:"first_name",placeholder:"First Name",value:p,onChange:function(e){return O(e)}}),Object(h.jsx)("input",{className:"form-control my-3",type:"text",name:"last_name",placeholder:"Last Name",value:f,onChange:function(e){return O(e)}}),Object(h.jsx)("input",{type:"email",name:"email",placeholder:"Email",className:"form-control my-3",value:b,onChange:function(e){return O(e)}}),Object(h.jsx)("input",{className:"form-control my-3",type:"password",name:"user_password",placeholder:"Password",value:j,onChange:function(e){return O(e)}}),Object(h.jsx)("button",{className:"btn btn-success btn-block",children:"Submit"})]}),Object(h.jsx)(u.b,{to:"/login",children:"Login"})]})},z=function(e){var t=e.setAuth,a=Object(n.useState)({email:"",user_password:""}),r=Object(d.a)(a,2),s=r[0],c=r[1],b=s.email,j=s.user_password,p=function(e){c(Object(l.a)(Object(l.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={email:b,user_password:j},e.next=5,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,console.log("body: ".concat(n,", response: ").concat(r)),e.next=9,r.json();case 9:(s=e.sent).token?(localStorage.setItem("token",s.token),t(!0),m.a.success("login successfull!")):(t(!1),m.a.error(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("h1",{className:"text-center my-5",children:"Login to start reporting!"}),Object(h.jsxs)("form",{onSubmit:f,children:[Object(h.jsx)("input",{className:"form-control my-3",type:"email",name:"email",placeholder:"Email",value:b,onChange:function(e){return p(e)}}),Object(h.jsx)("input",{className:"form-control",type:"password",name:"user_password",placeholder:"Password",value:j,onChange:function(e){return p(e)}}),Object(h.jsx)("button",{className:"btn btn-success btn-block",children:"Submit"})]}),Object(h.jsx)(u.b,{to:"/register",children:"Register"})]})};m.a.configure();var A=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],r=t[1],s=function(e){r(e)};function c(){return(c=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/is-verify",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,r(!0===a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){c.apply(this,arguments)}()})),Object(h.jsx)(n.Fragment,{children:Object(h.jsx)(u.a,{children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{exact:!0,path:"/login",render:function(e){return a?Object(h.jsx)(b.a,{to:"/dashboard"}):Object(h.jsx)(z,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(h.jsx)(b.b,{exact:!0,path:"/",render:function(e){return a?Object(h.jsx)(b.a,{to:"/dashboard"}):Object(h.jsx)(z,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(h.jsx)(b.b,{exact:!0,path:"/register",render:function(e){return a?Object(h.jsx)(b.a,{to:"/login"}):Object(h.jsx)(R,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(h.jsx)(b.b,{exact:!0,path:"/dashboard",render:function(e){return a?Object(h.jsx)(T,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(h.jsx)(b.a,{to:"/login"})}}),Object(h.jsx)(b.b,{exact:!0,path:"/challenge-dashboard",render:function(e){return a?Object(h.jsx)(x,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(h.jsx)(b.a,{to:"/login"})}}),Object(h.jsx)(b.b,{exact:!0,path:"/readers/:id",render:function(e){return a?Object(h.jsx)(v,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(h.jsx)(b.a,{to:"/login"})}}),Object(h.jsx)(b.b,{path:"*",render:function(e){return a?Object(h.jsx)(T,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(h.jsx)(b.a,{to:"/login"})}})]})})})})};s.a.render(Object(h.jsx)(A,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.2abcce08.chunk.js.map