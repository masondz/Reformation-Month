(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(17),s=a.n(r),c=(a(30),a(2)),o=a.n(c),l=a(4),i=a(5),d=a(3),u=(a(32),a(10)),b=a(8),j=a(6),h=(a(33),a(34),a(0)),m=function(e){e.setAuth;var t=e.inReadingChallenge,a=e.setInReadingChallenge,r=(e.setReadersChallenges,e.readersChallenges,e.checkChallenge),s=(e.toggleFC,e.setFindingChallenge),c=Object(n.useState)([]),u=Object(d.a)(c,2),b=u[0],m=u[1],p=Object(n.useState)({challenge_name:"",id:"",organization:""}),g=Object(d.a)(p,2),f=g[0],O=g[1],x=f.challenge_name,v=f.id;f.organization;function y(){return(y=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/find-challenges",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,m(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){y.apply(this,arguments)}()}),[]);var k=Object(n.useState)("Blank id"),_=Object(d.a)(k,2),C=_[0],N=_[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,N(a.id),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[C]),Object(n.useEffect)((function(){!function(){for(var e=0;e<b.length;e++)b[e].challenge_name===f.challenge_name&&O({challenge_name:b[e].challenge_name,organization:b[e].organization,id:b[e].id})}()}),[x,b]);var w=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={reader_id:C,challenge_id:v},e.next=7,fetch("/find-challenges",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(n)}).then((function(e){e.json().then((function(e){return console.log(e)})),200===e.status?(j.a.success("You have joined the ".concat(x," challenge!")),a(!0),r()):401===e.status?j.a.error("You have already joined challenge: ".concat(x)):400===e.status&&j.a.error("".concat(x," does not exists"))})).then(O({challenge_name:"",id:"",organization:""}));case 7:e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),S=Object(n.useState)(""),T=Object(d.a)(S,2);T[0],T[1];return Object(h.jsx)(n.Fragment,{children:Object(h.jsxs)("form",{className:"",onSubmit:w,children:[t?Object(h.jsx)("p",{onClick:function(){return s(!1)},className:"FC-close",children:"+"}):Object(h.jsx)("p",{onClick:function(){return s(!1)},className:"FC-close",style:{visibility:"hidden"},children:"+"}),Object(h.jsxs)("div",{className:"row align-items-end",children:[Object(h.jsx)("label",{htmlFor:"chal-list",children:"Find a reading Challenge"}),Object(h.jsx)("input",{value:x,onChange:function(e){return function(e){O(Object(l.a)(Object(l.a)({},f),{},{challenge_name:e.target.value}))}(e)},className:"form-control",list:"challenge-list",name:"chal-list",id:"chal-list",placeholder:"Search for reading challenge"}),Object(h.jsx)("datalist",{id:"challenge-list",children:b.map((function(e){return Object(h.jsxs)("option",{value:e.challenge_name,children:[e.challenge,": ",e.goal]},e.id)}))}),Object(h.jsx)("button",{className:"btn btn-outline-success my-2",children:"Join"})]})]})})},p=function(e){e.setAuth;var t=e.challenge,a=e.setCalculating,r=e.reader,s=e.displayTotal,c=Object(n.useState)("..."),l=Object(d.a)(c,2),u=l[0],b=l[1];console.log("ChallengeTotal challenge prop:"+t.challenge),console.log("displayTotal challenge prop:"+s);var j=Object(n.useState)(0),m=Object(d.a)(j,2),p=m[0],g=m[1],f=Object(n.useState)(0),O=Object(d.a)(f,2),x=O[0],v=O[1],y=function(){var e=Object(i.a)(o.a.mark((function e(){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.prev=1,e.next=4,fetch("/challenge-dashboard/readers-count/".concat(a),{method:"GET",headers:{"Content-Type":"application/json",token:localStorage.token}});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,v(r.total),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){var n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.challenge,e.prev=2,e.next=5,fetch("/challenge-dashboard/challenge-total/".concat(n,"/").concat(r),{method:"GET",headers:{"Content-Type":"application/json",token:localStorage.token}});case 5:return s=e.sent,e.next=8,s.json();case 8:c=e.sent,console.log("getTotal query"+c),b(c.total),a(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}})()(),g(u/t.goal*100),y()}),[u,t.goal,t.id,r.chapters_read,r.books_read,r.verses_memorized,s.chapters_read,s.books_read,s.verses_memorized]),console.log(p),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{children:[u," / ",t.goal," ",t.challenge]}),Object(h.jsx)("div",{className:"progress",children:Object(h.jsx)("div",{className:"progress-bar bg-warning",style:{width:"".concat(p,"%")}})})]}),Object(h.jsxs)("p",{className:"reader-total",children:["Readers: ",x]})]})},g=function(e){e.setAuth;var t=e.challenge,a=Object(n.useState)([]),r=Object(d.a)(a,2),s=r[0],c=r[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){var a,n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.id,e.next=4,fetch("/challenge-dashboard/reader-leaderboard/".concat(a),{method:"GET",headers:{"Content-Type":"application/json",token:localStorage.token}});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,s=Object.values(r),console.log("leaderboard?"+s),c(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[t.id]),Object(h.jsx)("div",{className:"leaderboard",children:s.map((function(e){return Object(h.jsxs)("p",{className:"board-entry",children:[e.first_name," ",e.last_name,": ",e.chapters_read]})}))})},f=a(7),O=function(e){var t=e.challenge,a=e.reader,r=(e.setReadersChallenges,e.readersChallenges);console.log(r);var s=Object(n.useState)({challenge_name:t.challenge_name,organization:t.organization,goal:t.goal,challenge_type:t.challenge,id:t.id}),c=Object(d.a)(s,2),u=c[0],b=c[1];console.log(u.challenge_type);var m={challenge_name:t.challenge_name,organization:t.organization,goal:t.goal,challenge_type:t.challenge,id:t.id},p=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.confirm("Are you sure you want to delete challenge?"),e.prev=1,!0!==n){e.next=19;break}return console.log("going to delete the challenge"),s=a.id,c=u.challenge_name,console.log(c,s),l={reader_id:s,challenge_name:c},console.log(r),e.next=11,fetch("/challenge-dashboard/",{method:"DELETE",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(l)});case 11:return i=e.sent,e.next=14,i.json();case 14:d=e.sent,console.log(d),202===i.status?window.location="/":401===i.status?j.a.error("Challenge already doesn't exist."):403===i.status&&j.a.error("You are not authorized to delete this challenge."),e.next=20;break;case 19:j.a.warning("Challenge not deleted.");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),console.error(e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),g=function(e){e.preventDefault(),b(Object(l.a)(Object(l.a)({},u),{},Object(f.a)({},e.target.name,e.target.value)))},O=function(e){console.log("radio clicked"),e.preventDefault(),b(Object(l.a)(Object(l.a)({},u),{},Object(f.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n=a.id,r=u.challenge_name,s=u.organization,c=u.challenge_type,l=u.goal,i=u.id,d={reader_id:n,challenge_name:r,organization:s,challenge_type:c,goal:l,id:i},console.log(d),e.next=8,fetch("/challenge-dashboard/",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(d)});case 8:if(403!==e.sent.status){e.next=11;break}return e.abrupt("return",j.a.error("You are not authorized to change this challenge"));case 11:window.location="/",j.a.success("Reading Challenge updated!"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0.messages);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),v="id".concat(u.id),y="#id".concat(u.id);return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("button",{type:"button",class:"challenge-edit","data-toggle":"modal","data-target":y,children:"Edit"}),Object(h.jsx)("div",{className:"modal fade",id:v,tabindex:"-1","aria-labelledby":"edit-challenge","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsxs)("h3",{class:"modal-title",id:v,children:["Edit Challenge ",u.challenge_name]}),Object(h.jsx)("button",{type:"button",className:"btn-close close","data-bs-dismiss":"modal","aria-label":"Close","data-dismiss":"modal",onClick:function(){return b(m)}})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsxs)("form",{className:"form-control",children:[Object(h.jsxs)("div",{className:"form-control bg-light text-black",children:[Object(h.jsx)("lable",{htmlFor:"goal",className:"mr-2",children:"Goal:"}),Object(h.jsx)("input",{className:"form-control mt-1",type:"number",name:"goal",onChange:function(e){return g(e)},value:u.goal})]}),Object(h.jsx)("br",{}),Object(h.jsxs)("lable",{htmlFor:"organization",className:"bg-light text-black form-control",children:["Organization:",Object(h.jsx)("input",{className:" form-control mt-1",type:"text",name:"organization",value:u.organization,onChange:function(e){return g(e)}})]}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"form-control bg-light",children:["Challenge Type:",Object(h.jsx)("br",{}),Object(h.jsx)("h4",{className:"OptionSign border border-secondary",children:u.challenge_type}),Object(h.jsxs)("div",{class:"btn-group ChallengeType bg-white",children:[Object(h.jsx)("button",{type:"button",className:"btn btn-outline-secondary",name:"challenge_type",onClick:function(e){return O(e)},value:"chapters",children:"Chapters"}),Object(h.jsx)("button",{disabled:!0,type:"button",className:"btn btn-outline-secondary",value:"books",name:"challenge_type",onClick:function(e){return O(e)},children:"Books"}),Object(h.jsx)("button",{disabled:!0,type:"button",className:"btn btn-outline-secondary",value:"verses",name:"challenge_type",onClick:function(e){return O(e)},children:"Verses"})]})]}),Object(h.jsx)("br",{})]})}),Object(h.jsxs)("div",{class:"modal-footer",children:[Object(h.jsx)("button",{type:"button",class:"btn btn-primary",onClick:function(e){return x(e)},children:"Save changes"}),Object(h.jsx)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal","data-dismiss":"modal",onClick:function(){p()},children:"Delete"})]})]})})})]})},x=function(e){var t=e.setAuth,a=e.reader,r=e.readersChallenges,s=e.setReadersChallenges,c=e.setInReadingChallenge,l=e.displayTotal;console.log("ReadeChallenges.js:displayTotal -"+l);a.first_name,a.last_name,a.chapters_read,a.books_read,a.versus_memorized,a.id;var u=Object(n.useState)(!1),b=Object(d.a)(u,2),m=b[0],f=b[1],x=Object(n.useState)("..."),v=Object(d.a)(x,2),y=(v[0],v[1]),k=function(){var e=Object(i.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/reader-dashboard/reader-challenge-id/?reader_id=".concat(t,"&challenge_id=").concat(a),{method:"DELETE",headers:{token:localStorage.token}});case 3:return e.sent,e.next=6,s(r.filter((function(e){return e.id!==a})));case 6:j.a.warning("You have left the reading challenge."),0===r.length&&c(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){0===r.length&&c(!1)})),Object(h.jsx)("div",{className:"my-2",children:r.map((function(e,c){return Object(h.jsx)(n.Fragment,{children:Object(h.jsx)("div",{className:"challenge-card",children:Object(h.jsxs)("div",{className:"challenge-content",children:[Object(h.jsxs)("div",{className:"challenge-titles",children:[Object(h.jsx)("p",{children:e.organization}),Object(h.jsx)("h3",{value:e.id,children:e.challenge_name},110),Object(h.jsx)("div",{children:m?"...":Object(h.jsx)(p,{reader:a,setAuth:t,challenge:e,setTotal:y,setCalculating:f,displayTotal:l})},(e.challege_id+1).toString())]}),a.id!==e.challenge_admin?Object(h.jsx)("div",{className:"leave-challenge",children:Object(h.jsx)("p",{onClick:function(){return k(a.id,e.id)},children:"Leave Challenge"})}):Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)(g,{setAuth:t,challenge:e}),Object(h.jsx)(O,{challenge:e,reader:a,setReadersChallenges:s,readersChallenges:r})]},e.id.toString())]})})},e.id.toString())}))})},v=function(e){e.setAuth;var t=e.setCreateChallenge,a=e.reader,r=Object(n.useState)({challenge_name:"",organization:"",challenge_type:"chapters",goal:""}),s=Object(d.a)(r,2),c=s[0],u=s[1],b=Object(n.useState)(""),m=Object(d.a)(b,2),p=m[0],g=m[1],O=c.challenge_name,x=c.organization,v=c.challenge_type,y=c.goal,k=function(e){u(Object(l.a)(Object(l.a)({},c),{},Object(f.a)({},e.target.name,e.target.value)))},_=function(e){console.log("radio clicked"),u(Object(l.a)(Object(l.a)({},c),{},{challenge_type:e.target.value}))},C=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.id,r={reader_id:t,challenge_id:n=p},e.next=5,fetch("/find-challenges",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 5:return s=e.sent,console.log("reader_id: ".concat(t," challenge_id: ").concat(n)),e.abrupt("return",s.json());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){p&&(console.log("newChallengeId state is not falsey"),C())}),[p]);var N=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a={challenge_name:O,organization:x,challenge_type:v,goal:y},e.next=5,fetch("/challenge-dashboard",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(a)});case 5:if(401!==(n=e.sent).status){e.next=8;break}return e.abrupt("return",j.a.error("Challenge Name already exists"));case 8:return e.next=10,n.json().then((function(e){return g(e.id)})).then((function(){return console.log(p)})).then((function(){return C()}));case 10:console.log(p),u({challenge_name:"",organization:"",challenge_type:"chapters",goal:""}),window.location="/",e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0.message),j.a.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("h3",{children:"Create or Change Challenge"}),Object(h.jsxs)("form",{onSubmit:N,children:[Object(h.jsx)("input",{required:!0,className:"form-control my-3",type:"text",name:"challenge_name",placeholder:"Challenge Name",value:O,onChange:function(e){return k(e)}}),Object(h.jsx)("input",{required:!0,className:"form-control my-3",type:"text",name:"organization",placeholder:"Organization (church name, bible study, facebook group etc.)",value:x,onChange:function(e){return k(e)}}),Object(h.jsx)("h3",{children:"Select Challenge Type"}),Object(h.jsxs)("div",{className:"form-check-inline",children:[Object(h.jsx)("input",{autoComplete:"off",id:"chapters",className:"btn-check",type:"radio",name:"challenge-type",onClick:function(e){return _(e)},value:"chapters"}),Object(h.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"chapters",children:"Read Chapters"}),Object(h.jsx)("input",{id:"books",disabled:!0,className:"btn-check",autoComplete:"off",type:"radio",name:"challenge-type",value:"books",onClick:function(e){return _(e)}}),Object(h.jsx)("label",{className:"btn btn-outline-primary my-3 mx-3",htmlFor:"books",children:"Read Books"}),Object(h.jsx)("input",{id:"verses",disabled:!0,className:"btn-check",type:"radio",name:"challenge-type",value:"verses",onClick:function(e){return _(e)}}),Object(h.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"verses",children:"Memorize Verses"})]}),Object(h.jsx)("input",{required:!0,className:"form-control my-3",type:"number",name:"goal",placeholder:"Challenge Goal",value:y,onChange:function(e){return k(e)}}),Object(h.jsx)("button",{className:"btn btn-outline-success btn-lg mx-2",children:"Submit"}),Object(h.jsx)("button",{className:"btn btn-outline-danger btn-lg my-2",onClick:function(){return t(!1)},children:"Cancel"})]})]})},y=(a(36),function(e){e.setAuth;var t=e.reader,a=t.chapters_read;t.books_read,t.verses_memorized;return console.log(a),console.log(t),Object(h.jsx)(n.Fragment,{children:Object(h.jsx)("div",{className:"container-reader",children:Object(h.jsxs)("div",{className:"stats",children:[Object(h.jsxs)("h4",{children:["Welcome ",t.first_name,":"]}),Object(h.jsxs)("p",{id:"chapters",children:[a," chapters"]})]})})})}),k=function(e){e.setAuth;var t=e.reader,a=e.setReader,r=e.toggleFG,s=e.toggleFC,c=e.findingChallenge,u=e.inReadingChallenge,b=Object(n.useState)(!1),j=Object(d.a)(b,2),m=(j[0],j[1],Object(n.useState)("")),p=Object(d.a)(m,2),g=p[0],O=p[1],x=Object(n.useState)(""),v=Object(d.a)(x,2),y=v[0],k=v[1],_=Object(n.useState)(""),C=Object(d.a)(_,2),N=C[0],w=C[1],S=Object(n.useState)(""),T=Object(d.a)(S,2),F=T[0],R=T[1],A=Object(n.useState)(""),G=Object(d.a)(A,2),P=(G[0],G[1],function(){O(""),k(""),w("")}),E=function(e,n){var r=t[n]+Number(e);a(Object(l.a)(Object(l.a)({},t),{},Object(f.a)({},n,r)))},z=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),R(a.target.name),e.prev=2,n=F,r=F,s=t.id,E(c="chapters_read"===n?g:"books_read"===n?y:N,F),l={challenge_type:r,total:c,reader_id:s},e.next=10,fetch("/submit-report/",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(l)});case 10:return i=e.sent,e.next=13,i.json();case 13:d=e.sent,console.log(d),P(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsxs)("div",{className:"nav-buttons",children:[Object(h.jsx)("button",{type:"button",className:"nav-btn","data-toggle":"modal","data-target":"#thing",children:"Report Reading"}),Object(h.jsx)("button",{type:"button",className:"nav-btn",onClick:function(){return r()},children:"Family Group"}),!c&&u&&Object(h.jsx)("button",{type:"button",className:"nav-btn",onClick:function(){return s()},children:"More Challenges"})]}),Object(h.jsx)("div",{className:"modal fade",id:"thing",tabindex:"-1","aria-labelledby":"edit-challenge","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",style:{"z-index":"2"},children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsxs)("h3",{class:"modal-title",id:"thing",style:{color:"black"},children:["Report Reading for ",t.first_name]}),Object(h.jsx)("button",{type:"button",className:"btn-close close","data-bs-dismiss":"modal","aria-label":"Close","data-dismiss":"modal",onClick:function(){return P()}})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsxs)("form",{className:"form-control",children:[Object(h.jsx)("div",{className:"form-control bg-light text-black",children:Object(h.jsxs)("lable",{htmlFor:"Chapters",className:"mr-2",children:["Chapters Read",Object(h.jsx)("input",{className:"form-control mt-1",type:"number",name:"chapters_read",placeholder:"0",onChange:function(e){return function(e){return e.preventDefault(),R(e.target.name),"chapters_read"===e.target.name?O(e.target.value):"books_read"===e.target.name?k(e.target.value):void w(e.target.value)}(e)},value:g}),Object(h.jsx)("button",{type:"button",name:"chapters_read",htmlFor:"chapters_memorized",className:"btn btn-primary","data-dismiss":"modal",onClick:function(e){return z(e)},children:"Save changes"})]})}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{class:"modal-footer"})]})})]})})})]})},_=function(e){e.setAuth;var t=e.adReader,a=e.displayTotal,r=e.setDisplayTotal,s=t.name,c=t.chapters_read,u=t.books_read,b=t.verses_memorized,j=Object(n.useState)({chapters_read:"",books_read:"",verses_memorized:""}),m=Object(d.a)(j,2),p=m[0],g=m[1],O=Object(n.useState)(""),x=Object(d.a)(O,2),v=x[0],y=x[1],k=Object(n.useState)({chapters_read:"",books_read:"",verses_memorized:""}),_=Object(d.a)(k,2),C=_[0],N=_[1];Object(n.useEffect)((function(){r({chapters_read:c,books_read:u,verses_memorized:b}),N({chapters_read:c,books_read:u,verses_memorized:b})}),[s,c,u,b,r]);var w=function(e,t){console.log("".concat(t,": ").concat(C[t]));var n=Number(C[t])+Number(e);console.log(n),N(Object(l.a)(Object(l.a)({},C),{},Object(f.a)({},t,n))),r(Object(l.a)(Object(l.a)({},a),{},Object(f.a)({},t,n)))},S=function(){g({chapters_read:"",books_read:"",verses_memorized:""})},T=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s,c,l,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),y(a.target.name),e.prev=2,n=v,r=v,s=t.ad_reader_id,"chapters_read"===n?(c=p.chapters_read,w(c,v)):"books_read"===n?(c=p.books_read,w(c,v)):(c=p.verses_memorized,w(c,v)),l={challenge_type:r,total:c,ad_reader_id:s},e.next=10,fetch("/additional-readers",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(l)});case 10:return i=e.sent,e.next=13,i.json();case 13:d=e.sent,console.log(d),S(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),F="ad".concat(t.ad_reader_id),R="#ad".concat(t.ad_reader_id);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h5",{children:["Chapters: ",C.chapters_read]}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{type:"button",class:"btn btn-primary btn-sm","data-toggle":"modal","data-target":R,children:"Report Reading"}),Object(h.jsx)("div",{className:"modal fade",id:F,tabindex:"-1","aria-labelledby":"edit-challenge","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsxs)("h3",{class:"modal-title",id:F,children:["Report Reading for: ",s]}),Object(h.jsx)("button",{type:"button",className:"btn-close close","data-bs-dismiss":"modal","aria-label":"Close","data-dismiss":"modal",onClick:function(){return S()}})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsxs)("form",{className:"",children:[Object(h.jsx)("div",{className:"form-control bg-light text-black",children:Object(h.jsxs)("lable",{htmlFor:"Chapters",className:"mr-2",children:["Chapters Read",Object(h.jsx)("input",{className:"form-control mt-1",type:"number",name:"chapters_read",placeholder:"0",onChange:function(e){return function(e){return e.preventDefault(),y(e.target.name),"chapters_read"===e.target.name?g(Object(l.a)(Object(l.a)({},p),{},{chapters_read:e.target.value})):"books_read"===e.target.name?g(Object(l.a)(Object(l.a)({},p),{},{books_read:e.target.value})):(g(Object(l.a)(Object(l.a)({},p),{},{verses_memorized:e.target.value})),void console.log("you changed something"))}(e)},value:p.chapters_read}),Object(h.jsx)("button",{type:"button",name:"chapters_read",htmlFor:"chapters_read",className:"btn btn-primary","data-dismiss":"modal",onClick:function(e){return T(e)},children:"Save changes"})]})}),Object(h.jsx)("div",{class:"modal-footer"})]})})]})})})]})},C=function(e){e.setAuth;var t=e.reader,a=Object(n.useState)({familyName:"",familyPassword:""}),r=Object(d.a)(a,2),s=r[0],c=r[1],u=s.familyName,b=s.familyPassword,m=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s,c,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log("you submitted something."),n=u,r=b,s=t.id,e.prev=5,c={family_name:n,fg_password:r,reader_id:s},e.next=9,fetch("/family-group/add-reader",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(c)});case 9:return l=e.sent,e.next=12,l.json();case 12:if(i=e.sent,window.location="/",401!==i.status){e.next=16;break}return e.abrupt("return",j.a.error("Password or Family Name is incorrect"));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){c(Object(l.a)(Object(l.a)({},s),{},Object(f.a)({},e.target.name,e.target.value)))};return Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#joinFGModal",children:"Join A Family Group"}),Object(h.jsx)("div",{class:"modal fade",id:"joinFGModal",tabindex:"-1","aria-labelledby":"joinFGModalLabel","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsx)("h5",{class:"modal-title",id:"joinFGModalLabel",children:"Join a Family Group"}),Object(h.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){c({familyName:"",familyPassword:""})}})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsx)("form",{onSubmit:m,id:"join-family-group",children:Object(h.jsxs)("lable",{htmlFor:"familyName",className:"bg-light text-black form-control",children:["Family Group Name",Object(h.jsx)("input",{className:" form-control mt-1 mb-1",type:"character",name:"familyName",placeholder:"",value:u,onChange:function(e){return p(e)}}),"Family Group Password",Object(h.jsx)("input",{className:" form-control mt-1",type:"password",name:"familyPassword",placeholder:"",value:b,onChange:function(e){return p(e)}})]})})}),Object(h.jsxs)("div",{class:"modal-footer",children:[Object(h.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(h.jsx)("button",{type:"submit",class:"btn btn-primary",form:"join-family-group",children:"Submit"})]})]})})})]})},N=function(e){e.setAuth;var t=e.reader,a=e.setFamGroup,r=e.setInFamGroup,s=Object(n.useState)({familyName:"",familyPassword:"",confirmPassword:""}),c=Object(d.a)(s,2),u=c[0],b=c[1],m=u.familyName,p=u.familyPassword,g=u.confirmPassword,O=function(e){b(Object(l.a)(Object(l.a)({},u),{},Object(f.a)({},e.target.name,e.target.value)))},x=function(){b({familyName:"",familyPassword:"",confirmPassword:""})},v=function(){var e=Object(i.a)(o.a.mark((function e(n){var s,c,l,i,d,u,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),console.log("you submitted something."),s=m,c=p,l=t.id,p===g){e.next=9;break}return e.abrupt("return",j.a.error("Password does not match. Please try again."));case 9:return e.prev=9,i={family_name:s,fg_password:c,reader_id:l},e.next=13,fetch("/family-group/",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(i)});case 13:return d=e.sent,e.next=16,d.json();case 16:if(401!==(u=e.sent).status){e.next=19;break}return e.abrupt("return",j.a.error("family name already taken!"));case 19:b=u.family_name,a({family_name:b}),r(!0),setTimeout((function(){window.location="/"}),2e3),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(9),console.error(e.t0.message);case 28:case"end":return e.stop()}}),e,null,[[9,25]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{type:"button",className:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#createFGModal",children:"Create Family Group"}),Object(h.jsx)("div",{class:"modal fade",id:"createFGModal",tabindex:"-1","aria-labelledby":"createFGModalLabel","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsx)("h5",{class:"modal-title",id:"createFGModalLabel",children:"Create a Family Group"}),Object(h.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){return x()}})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsx)("form",{onSubmit:v,id:"create-family-group",children:Object(h.jsxs)("lable",{htmlFor:"familyName",className:"bg-light text-black form-control",children:["Name Family Group",Object(h.jsx)("input",{className:" form-control mt-1 mb-1",type:"character",name:"familyName",placeholder:"",value:m,onChange:function(e){return O(e)}}),"Create Password for Family Group",Object(h.jsx)("input",{className:" form-control mt-1",type:"password",name:"familyPassword",placeholder:"",value:p,onChange:function(e){return O(e)}}),"Confirm Password",Object(h.jsx)("input",{className:" form-control mt-1",type:"password",name:"confirmPassword",placeholder:"",value:g,onChange:function(e){return O(e)}})]})})}),Object(h.jsxs)("div",{class:"modal-footer",children:[Object(h.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function(){return x()},children:"Close"}),Object(h.jsx)("button",{type:"submit",class:"btn btn-primary",form:"create-family-group",children:"Submit"})]})]})})})]})},w=a(25),S=function(e){e.setAuth;var t=e.reader,a=e.adReaders,r=e.setAdReaders,s=e.famGroup,c=e.setCheckAdReaders,l=e.checkAdReaders,u=e.leaveFG,b=Object(n.useState)({name:""}),m=Object(d.a)(b,2),p=m[0],g=m[1],f=p.name,O=function(){g({name:""})},x=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,n=s.id,console.log("I'm in the adReaderJoinFG func: ".concat(a," ").concat(n,"...")),e.prev=3,r={ad_reader_id:a,fg_id:n},e.next=7,fetch("/family-group/add-additional-reader",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 7:return c=e.sent,e.next=10,c.json();case 10:l=e.sent,console.log(l),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(o.a.mark((function e(n){var i,d,u,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,i=t.id,d={name:f,reader_id:i},f){e.next=6;break}throw new Error("New reader must have a name!");case 6:return e.next=8,fetch("/additional-readers",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(d)});case 8:return u=e.sent,e.next=11,u.json();case 11:if(b=e.sent,console.log(b.ad_reader_id),!b){e.next=21;break}return e.next=16,x(b.ad_reader_id,s.id);case 16:r([].concat(Object(w.a)(a),[{name:f,chapters_read:0,books_read:0,verses_memorized:0}])),O(),c(!l),e.next=22;break;case 21:console.log("adREaderJoinFG didn't work");case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(1),console.error(e.t0.message),j.a.error(e.t0.message);case 28:return e.abrupt("return",console.log("you submitted something"));case 29:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"d-grid gap-2 col-6 mx-auto",children:[Object(h.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#make-additional-reader",children:"Add Family Group Member"}),Object(h.jsx)("button",{button:!0,type:"button",className:"btn btn-outline-danger btn-sm","data-bs-toggle":"modal","data-bs-target":"#leave-fg",children:"Leave Family Group"})]}),Object(h.jsx)("div",{class:"modal fade",id:"make-additional-reader",tabindex:"-1","aria-labelledby":"make-additional-readerLabel","aria-hidden":"true",children:Object(h.jsx)("div",{class:"modal-dialog",children:Object(h.jsxs)("div",{class:"modal-content",children:[Object(h.jsxs)("div",{class:"modal-header",children:[Object(h.jsx)("h5",{class:"modal-title",id:"make-additional-readerLabel",children:"Create a new Family Group Member"}),Object(h.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(h.jsx)("div",{class:"modal-body",children:Object(h.jsx)("form",{onSubmit:v,id:"make-additional-readerform",children:Object(h.jsxs)("lable",{htmlFor:"familyName",className:"bg-light text-black form-control",children:["Name the new member.",Object(h.jsx)("input",{className:" form-control mt-1 mb-1",type:"character",name:"name",placeholder:"",value:f,onChange:function(e){return function(e){e.preventDefault(),g({name:e.target.value})}(e)}})]})})}),Object(h.jsxs)("div",{className:"modal-footer",children:[Object(h.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function(){return O()},children:"Close"}),Object(h.jsx)("button",{type:"submit","data-dismiss":"modal",className:"btn btn-primary",form:"make-additional-readerform",children:"Submit"})]})]})})}),Object(h.jsx)("div",{className:"modal fade",id:"leave-fg",tabindex:"-1","aria-labelledby":"leave-fgLabel","aria-hidden":"true",children:Object(h.jsx)("div",{className:"modal-dialog",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsx)("div",{className:"modal-header",children:Object(h.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})}),Object(h.jsx)("div",{className:"modal-body",children:Object(h.jsx)("p",{children:"Are you sure you want to leave Family Group?"})}),Object(h.jsxs)("div",{className:"modal-footer",children:[Object(h.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),Object(h.jsx)("button",{type:"button","data-dismiss":"modal",className:"btn btn-warning","data-bs-dismiss":"modal",onClick:function(){return u()},children:"Leave"})]})]})})})]})},T=function(e){e.setAuth;var t=e.adReader,a=e.reader,r=e.adReaders,s=e.setAdReaders,c=e.famGroup,l=Object(n.useState)(!1),u=Object(d.a)(l,2),b=(u[0],u[1],document.querySelector("#delete-adreader-modal"),document.querySelector("body"),function(){var e=Object(i.a)(o.a.mark((function e(){var n,l,i,d,u,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.id,l=t.ad_reader_id,i=c.id,d={reader_id:n,ad_reader_id:l,fg_id:i},e.next=7,fetch("/additional-readers",{method:"DELETE",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(d)});case 7:if(u=e.sent,console.log(u.status),403!==u.status){e.next=11;break}return e.abrupt("return",j.a.error("You must be creator of reader to delete reader."));case 11:b=r.filter((function(e){return e.ad_reader_id!==l})),s(b),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}()),m="del-ad".concat(t.ad_reader_id),p="#del-ad".concat(t.ad_reader_id);return Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{type:"button",style:{float:"right"},className:"delete-adreader","data-bs-toggle":"modal","data-bs-target":p,children:"Delete Reader"}),Object(h.jsx)("div",{className:"modal fade",id:m,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(h.jsx)("div",{className:"modal-dialog",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsx)("div",{className:"modal-header",children:Object(h.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})}),Object(h.jsx)("div",{className:"modal-body",children:Object(h.jsx)("p",{children:"Are you sure you want to delete member?"})}),Object(h.jsxs)("div",{className:"modal-footer",children:[Object(h.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",children:"Cancel"}),Object(h.jsx)("button",{type:"button",className:"btn btn-warning",onClick:function(){return b()},"data-bs-dismiss":"modal",children:"Delete"})]})]})})})]})},F=function(e){e.setAuth;var t=e.adReader,a=(e.setChallenges,e.challenges),r=e.getAdReaderChallenges,s=Object(n.useState)([]),c=Object(d.a)(s,2),u=c[0],b=c[1];function m(){return(m=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/find-challenges",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,b(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]);var p=function(){var e=Object(i.a)(o.a.mark((function e(n){var s,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,s=t.ad_reader_id,c={ad_reader_id:s,challenge_id:y},e.next=7,fetch("/additional-readers/challenges",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(c)});case 7:200===(l=e.sent).status?(console.log(a),j.a.success("Member added to challenge!"),r()):403===l.status&&j.a.warning("Member already in reading challenge!"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),j.a.warning("Member already in reading challenge!"),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),g=Object(n.useState)({challenge_name:"",id:"",organization:""}),f=Object(d.a)(g,2),O=f[0],x=f[1],v=O.challenge_name,y=O.id;O.organization;Object(n.useEffect)((function(){!function(){for(var e=0;e<u.length;e++)u[e].challenge_name===O.challenge_name&&x({challenge_name:u[e].challenge_name,organization:u[e].organization,id:u[e].id})}()}),[v,u]);return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:p,id:"adreader-find-challenge",children:[Object(h.jsx)("input",{value:v,onChange:function(e){return function(e){x(Object(l.a)(Object(l.a)({},O),{},{challenge_name:e.target.value}))}(e)},list:"challenge-list",name:"chal-list",id:"chal-list",placeholder:"Search for reading challenge"}),Object(h.jsx)("datalist",{id:"challenge-list",children:u.map((function(e){return Object(h.jsxs)("option",{value:e.challenge_name,children:["Read ",e.goal," Chapters"]},e.id)}))}),Object(h.jsx)("button",{className:"adreader-join",children:"Join"})]})})},R=function(e){var t=e.setAuth,a=e.adReader,r=Object(n.useState)([]),s=Object(d.a)(r,2),c=s[0],l=s[1],u=Object(n.useState)("member"),b=Object(d.a)(u,2),j=(b[0],b[1]),m=Object(n.useState)(!1),p=Object(d.a)(m,2),g=p[0],f=p[1],O=function(){f(!g)},x=a.ad_reader_id,v=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/additional-readers/challenges/".concat(x),{method:"GET",headers:{"Content-Type":"application/json",token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,l(a),console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={ad_reader_id:t,challenge_id:n=a},console.log(r),e.next=7,fetch("/additional-readers/challenges",{method:"DELETE",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 7:e.sent,l(c.filter((function(e){return e.id!==n}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{children:g?Object(h.jsxs)("div",{className:"adreader-challenges",children:[c.map((function(e){return Object(h.jsx)("div",{className:"challenges-container",children:Object(h.jsxs)("p",{children:[e.challenge_name," |",Object(h.jsx)("button",{id:e.challenge_id,className:"adreader-remove",onClick:function(){y(a.ad_reader_id,e.id)},children:"Remove"})]})})})),Object(h.jsx)("div",{children:Object(h.jsx)(F,{setAuth:t,adReader:a,setChallenges:l,challenges:c,getAdReaderChallenges:v})}),Object(h.jsx)("button",{className:"adreader-button",type:"button",onClick:function(){return O()},children:"Close"})]}):Object(h.jsx)("button",{className:"adreader-button",type:"button",onClick:function(){return j(a.name),v(),void O()},children:"Edit Challenges"})})},A=function(e){var t=e.setAuth,a=e.reader,r=e.displayTotal,s=e.setDisplayTotal,c=Object(n.useState)(!1),l=Object(d.a)(c,2),u=l[0],b=l[1],j=Object(n.useState)({}),m=Object(d.a)(j,2),p=m[0],g=m[1],f=Object(n.useState)([{name:void 0,chapters_read:"",books_read:"",verses_memorized:""}]),O=Object(d.a)(f,2),x=O[0],v=O[1],y=Object(n.useState)(!0),k=Object(d.a)(y,2),w=k[0],F=k[1],A=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/family-group",{method:"GET",headers:{token:localStorage.token}});case 3:if(401!==(t=e.sent).status){e.next=8;break}return console.log("You are not in a family group"),J(!1),e.abrupt("return");case 8:return console.log(t),e.next=11,t.json();case 11:a=e.sent,g(a),b(!0),J(!1),console.log(a),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.id,n=p.id,r={reader_id:t,fg_id:n},e.next=6,fetch("/family-group/remove-reader",{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 6:return s=e.sent,e.next=9,s.json();case 9:c=e.sent,console.log(c),window.location="/",e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){A()}),[]);var P=function(){var e=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/additional-readers",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,v(a),console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){P()}),[w]);var E=Object(n.useState)(!0),z=Object(d.a)(E,2),D=z[0],J=z[1];return Object(h.jsx)("div",{className:"",children:D?Object(h.jsx)("h4",{children:"loading..."}):Object(h.jsx)("div",{children:u?Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("div",{className:"family-title",children:Object(h.jsxs)("p",{children:["Family Group:"," ",Object(h.jsx)("strong",{children:p.family_name})]})}),Object(h.jsxs)("div",{className:"family-group",children:[Object(h.jsxs)("p",{children:["Family Group Leaders:"," ",function(e){for(var t="",a=0;a<e.length;a++)a===e.length-1?t+=e[a]+".":a===e.length-2?t+=e[a]+" and ":t+=e[a]+", ";return t}(p.primary_readers)]}),console.log(x),x.map((function(e,c){return Object(h.jsxs)("div",{className:"family-member",children:[Object(h.jsxs)("h4",{style:{backgroundColor:"rgba(252, 169, 3, .25)"},children:[e.name,":"," "]},c),Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)(_,{adReader:e,adReaders:x,setAdReaders:v,displayTotal:r,setDisplayTotal:s})," "]},c+1),Object(h.jsx)(R,{setAuth:t,adReader:e}),Object(h.jsx)(T,{setAuth:t,adReader:e,setAdReaders:v,adReaders:x,reader:a,setCheckAdReaders:F,famGroup:p})]})})),Object(h.jsx)("div",{className:"family-options",children:Object(h.jsx)(S,{setAuth:t,reader:a,adReaders:x,setAdReaders:v,famGroup:p,setCheckAdReaders:F,checkAdReaders:w,leaveFG:G})})]})]}):Object(h.jsx)("div",{className:"form-control my-2",children:Object(h.jsxs)("div",{className:"row justify-content-center",children:[Object(h.jsx)("p",{children:"You are not in a family Group yet. Family Groups allows you to report for readers who are not able to make reading reports for themselves (such as children)"}),Object(h.jsxs)("div",{className:"d-grid gap-2 col-6 mx-auto",children:[Object(h.jsx)(C,{setAuth:t,reader:a}),Object(h.jsx)(N,{setAuth:t,reader:a,setFamGroup:g,setInFamGroup:b})]})]})})})})},G=function(e){var t=e.setAuth,a=Object(n.useState)(""),r=Object(d.a)(a,2),s=r[0],c=r[1],l=Object(n.useState)(!1),u=Object(d.a)(l,2),b=u[0],p=u[1],g=Object(n.useState)([]),f=Object(d.a)(g,2),O=f[0],_=f[1],C=Object(n.useState)(!1),N=Object(d.a)(C,2),w=N[0],S=N[1],T=Object(n.useState)(!1),F=Object(d.a)(T,2),R=F[0],G=F[1],P=Object(n.useState)(!1),E=Object(d.a)(P,2),z=E[0],D=E[1];function J(){return L.apply(this,arguments)}function L(){return(L=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function M(){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/reader-dashboard/reader-challenge-id/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:0!==(a=e.sent).length&&(p(!0),_(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}console.log(O);Object(n.useEffect)((function(){J(),M()}),[b]);var Y=Object(n.useState)({chapters_read:"",books_read:"",verses_memorized:""}),U=Object(d.a)(Y,2),q=U[0],B=U[1],V=function(){D(!1===z)},W=Object(h.jsx)(n.Fragment,{children:Object(h.jsxs)("div",{className:"form-control mb-2",children:[Object(h.jsx)(m,{setAuth:t,readersChallenges:O,setReadersChallenges:_,inReadingChallenge:b,setInReadingChallenge:p,checkChallenge:M,toggleFC:function(){return V()},findingChallenge:z,setFindingChallenge:D}),Object(h.jsx)("button",{className:"btn btn-outline-info",onClick:function(){return S(!0)},children:"Create Challenge"})]})});return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsxs)("nav",{className:"nav-container",children:[Object(h.jsx)(y,{reader:s}),Object(h.jsx)("div",{className:"nav-buttons",children:Object(h.jsx)(k,{setAuth:t,reader:s,setReader:c,toggleFG:function(){G(!1===R)},toggleFC:function(){return V()},findingChallenge:z,inReadingChallenge:b})})]}),Object(h.jsxs)("main",{children:[w||b?z&&W:W,Object(h.jsxs)("div",{className:"mt-5",children:[w&&Object(h.jsx)(v,{setAuth:t,setCreateChallenge:S,reader:s}),R&&Object(h.jsx)(A,{setAuth:t,reader:s,setDisplayTotal:B,displayTotal:q}),!w&&b&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(x,{reader:s,getReader:J,setAuth:t,readersChallenges:O,setReadersChallenges:_,setInReadingChallenge:p,displayTotal:q})})]})]}),Object(h.jsx)("button",{className:"btn btn-warning text-white btn-sm mb-5",onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),j.a.success("You logged out successfully!")}(e)},children:"Logout"})]})},P=function(e){var t=e.setAuth,a=Object(n.useState)({email:"",user_password:"",confirm_password:"",first_name:"",last_name:""}),r=Object(d.a)(a,2),s=r[0],c=r[1],b=s.email,m=s.user_password,p=s.confirm_password,g=s.first_name,O=s.last_name,x=function(e){c(Object(l.a)(Object(l.a)({},s),{},Object(f.a)({},e.target.name,e.target.value)))},v=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),m===p){e.next=5;break}return e.abrupt("return",j.a.error("Password does not match. Please try again."));case 5:return e.prev=5,n={email:b,user_password:m,first_name:g,last_name:O},e.next=9,fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 9:return r=e.sent,e.next=12,r.json();case 12:(s=e.sent).token?(localStorage.setItem("token",s.token),t(!0),j.a.success("Registered Successfully")):(t(!1),j.a.error(s)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("h1",{className:"text-center my-5",children:"Register"}),Object(h.jsxs)("form",{onSubmit:v,children:[Object(h.jsx)("input",{className:"form-control my-3",type:"text",name:"first_name",placeholder:"First Name",value:g,onChange:function(e){return x(e)}}),Object(h.jsx)("input",{className:"form-control my-3",type:"text",name:"last_name",placeholder:"Last Name",value:O,onChange:function(e){return x(e)}}),Object(h.jsx)("input",{type:"email",name:"email",placeholder:"Email",className:"form-control my-3",value:b,onChange:function(e){return x(e)}}),Object(h.jsx)("input",{className:"form-control my-3",type:"password",name:"user_password",placeholder:"Password",value:m,onChange:function(e){return x(e)}}),Object(h.jsx)("input",{className:"form-control my-3",type:"password",name:"confirm_password",placeholder:"Confirm Password",value:p,onChange:function(e){return x(e)}}),Object(h.jsx)("button",{className:"btn btn-success btn-block",children:"Submit"})]}),Object(h.jsx)(u.b,{to:"/login",children:"Login"})]})},E=function(e){var t=e.setAuth,a=Object(n.useState)({email:"",user_password:""}),r=Object(d.a)(a,2),s=r[0],c=r[1],b=s.email,m=s.user_password,p=function(e){c(Object(l.a)(Object(l.a)({},s),{},Object(f.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={email:b,user_password:m},e.next=5,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,console.log("body: ".concat(n,", response: ").concat(r)),e.next=9,r.json();case 9:(s=e.sent).token?(localStorage.setItem("token",s.token),t(!0),j.a.success("login successfull!")):(t(!1),j.a.error(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("h1",{className:"text-center my-5",children:"Login to start reporting!"}),Object(h.jsxs)("form",{onSubmit:g,children:[Object(h.jsx)("input",{className:"form-control my-3",type:"email",name:"email",placeholder:"Email",value:b,onChange:function(e){return p(e)}}),Object(h.jsx)("input",{className:"form-control",type:"password",name:"user_password",placeholder:"Password",value:m,onChange:function(e){return p(e)}}),Object(h.jsx)("button",{className:"btn btn-success btn-block my-2",children:"Submit"})]}),Object(h.jsx)(u.b,{to:"/register",children:"Register"}),Object(h.jsx)("br",{}),Object(h.jsx)(u.b,{to:"/forgot-passwrod",children:"Forgot Password"})]})},z=(a(42),function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),c=Object(d.a)(s,2),l=c[0],b=c[1],j=Object(n.useState)(!1),m=Object(d.a)(j,2),p=m[0],g=m[1],f=Object(n.useState)(""),O=Object(d.a)(f,2),x=O[0],v=O[1],y=Object(n.useState)(!1),k=Object(d.a)(y,2),_=k[0],C=k[1],N=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,""!==a){e.next=7;break}b(!0),v(""),e.next=18;break;case 7:return C(!0),n={email:a},console.log(n),e.next=12,fetch("/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 12:return r=e.sent,e.next=15,r.json();case 15:s=e.sent,console.log(s),"email not in db"===s?(b(!1),g(!0),v(""),C(!1)):"recovery email sent"===s&&(g(!1),b(!1),C(!1),v("recovery email sent"));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("h1",{children:"Forgot Password Page!"}),Object(h.jsxs)("form",{onSubmit:N,children:[Object(h.jsx)("input",{className:"form-control my-3",type:"email",name:"email",placeholder:"Email",value:a,id:"email",onChange:function(e){return function(e){r(e.target.value)}(e)}}),Object(h.jsx)("button",{className:"btn btn-success btn-block my-2",children:"Submit"}),Object(h.jsx)("br",{})]}),l&&Object(h.jsx)("div",{children:Object(h.jsx)("p",{children:"The email cannot be blank."})}),p&&Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{children:"That email address isn't recognized. Please try agin or register for a new account."}),Object(h.jsx)(u.b,{to:"/register",children:"Register"}),Object(h.jsx)("br",{}),Object(h.jsx)(u.b,{to:"/login",children:"Login"})]}),"recovery email sent"===x&&Object(h.jsxs)("div",{children:[Object(h.jsx)("br",{}),Object(h.jsx)("h3",{children:"Reset password email sent! Check your email."})]}),_&&Object(h.jsxs)("div",{children:[Object(h.jsx)("br",{}),Object(h.jsx)("h3",{children:"Sending Recovery Email..."})]})]})}),D=function(){var e=Object(n.useState)({email:"",user_password:"",confirmPassword:""}),t=Object(d.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),c=Object(d.a)(s,2),b=c[0],m=c[1],p=Object(n.useState)(!0),g=Object(d.a)(p,2),O=g[0],x=g[1],v=Object(n.useState)(""),y=Object(d.a)(v,2),k=y[0],_=y[1],C=a.email,N=a.user_password,w=a.confirm_password,S=window.location.href,T=S.lastIndexOf("/")+1,F=S.slice(T);console.log(typeof F.toString());var R=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/reset/".concat(F),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:t=e.sent,console.log(t),200==t.status?(console.log("status is 200"),m(!1),x(!1),_(!1)):(m(!1),x(!1),_(!0)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){R()}),[]);var A=function(e){r(Object(l.a)(Object(l.a)({},a),{},Object(f.a)({},e.target.name,e.target.value)))},G=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),N===w){e.next=3;break}return e.abrupt("return",j.a.error("Password does not match. Please try again."));case 3:return e.prev=3,x(!0),a={email:C,user_password:N,token:F},e.next=8,fetch("/auth/reset/".concat(F),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 8:return n=e.sent,e.next=11,n.json();case 11:r=e.sent,console.log(r),"valid"===r&&(x(!1),m(!0)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("h1",{className:"text-center my-5",children:"Reset Password"}),k?Object(h.jsx)("div",{children:Object(h.jsx)("h4",{children:"Problem resetting password. Please send another reset link."})}):O?Object(h.jsx)("div",{children:Object(h.jsx)("h5",{children:"Loading User Data..."})}):Object(h.jsxs)("form",{onSubmit:G,children:[Object(h.jsx)("input",{type:"email",name:"email",placeholder:"Email",className:"form-control my-3",value:C,onChange:function(e){return A(e)}}),Object(h.jsx)("input",{className:"form-control my-3",type:"password",name:"user_password",placeholder:"New Password",value:N,onChange:function(e){return A(e)}}),Object(h.jsx)("input",{className:"form-control my-3",type:"password",name:"confirm_password",placeholder:"Confirm New Password",value:w,onChange:function(e){return A(e)}}),Object(h.jsx)("button",{className:"btn btn-success btn-block",children:"Submit"})]}),b&&Object(h.jsx)("div",{children:Object(h.jsx)("p",{children:"Your password has been successfully reset, please try logging in again."})}),Object(h.jsx)(u.b,{to:"/forgot-passwrod",children:"Forgot Password"}),Object(h.jsx)("br",{}),Object(h.jsx)(u.b,{to:"/login",children:"Login"})]})};j.a.configure();var J=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],r=t[1],s=function(e){r(e)};function c(){return(c=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/is-verify",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,r(!0===a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){c.apply(this,arguments)}()})),Object(h.jsx)(n.Fragment,{children:Object(h.jsx)(u.a,{children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{exact:!0,path:"/login",render:function(e){return a?Object(h.jsx)(b.a,{to:"/dashboard"}):Object(h.jsx)(E,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(h.jsx)(b.b,{exact:!0,path:"/",render:function(e){return a?Object(h.jsx)(b.a,{to:"/dashboard"}):Object(h.jsx)(E,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(h.jsx)(b.b,{exact:!0,path:"/register",render:function(e){return a?Object(h.jsx)(b.a,{to:"/login"}):Object(h.jsx)(P,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(h.jsx)(b.b,{exact:!0,path:"/forgot-passwrod",render:function(e){return a?Object(h.jsx)(b.a,{to:"/login"}):Object(h.jsx)(z,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(h.jsx)(b.b,{exact:!0,path:"/reset*",render:function(e){return a?Object(h.jsx)(b.a,{to:"/login"}):Object(h.jsx)(D,Object(l.a)(Object(l.a)({},e),{},{setAuth:s}))}}),Object(h.jsx)(b.b,{exact:!0,path:"/dashboard",render:function(e){return a?Object(h.jsx)(G,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(h.jsx)(b.a,{to:"/login"})}}),Object(h.jsx)(b.b,{exact:!0,path:"/challenge-dashboard",render:function(e){return a?Object(h.jsx)(v,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(h.jsx)(b.a,{to:"/login"})}}),Object(h.jsx)(b.b,{exact:!0,path:"/readers/:id",render:function(e){return a?Object(h.jsx)(y,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(h.jsx)(b.a,{to:"/login"})}}),Object(h.jsx)(b.b,{path:"*",render:function(e){return a?Object(h.jsx)(G,Object(l.a)(Object(l.a)({},e),{},{setAuth:s})):Object(h.jsx)(b.a,{to:"/login"})}})]})})})})};s.a.render(Object(h.jsx)(J,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.1ec533d5.chunk.js.map